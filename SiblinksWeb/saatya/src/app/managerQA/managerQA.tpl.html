<!-- Sidebar left menu -->
<div id="sidebar-menu" class="sidebar-left" ng-include="sidebarLeft"></div>
<!-- /End Sidebar left menu -->
<!-- Main center content -->
<div class="content">
    <div class="center-content">
        <div class="center-content-wrapper">
            <section id="dashboard">
                <!-- Content header -->
                <div class="dashboard-header">
                    <h4>Manage Q&A</h4>
                    <p> </p>
                </div>
                <!-- /End Content header -->
                <!-- Content of page -->
                <div class="manager-video mentor-manage-qa-content mentor-manage-video">
                    <div class="row top-mag">
                        <div class="col-md-4 mentor-qa-search">
                            <div class="col-md-12 search">
                                <form class="navbar-form" role="search">
                                    <div class="input-group">
                                        <input type="text" ng-enter="searchQuestion()" ng-model="textSearch" class="form-control-search input-search" placeholder="Type your search" name="srch-term" id="srch-term" onfocus="this.placeholder = ''">
                                        <div class="input-group-btn">
                                            <button class="btn btn-default"  ng-click="searchQuestion()" ><img src="assets/images/icon-search.png" alt=""></button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="sl-newwest">
                                <div angucomplete-alt id="autocompleteSubs" placeholder="Search subjects.." pause="300"
                                     selected-object="selectedSubject"
                                     local-data="subjectsParent" search-fields="name" title-field="name"
                                     minlength="0" input-class=""
                                     match-class="highlight"  />
                                <span data-icon="&#x43;"></span>
                            </div>
                            <div class="btn-filter"><button ng-click="fillerSubject()">Filter</button></div>
                        </div>
                    </div>
                    <!-- /End Top content -->
                    <div class="main-qa clearfix">
                        <div class="col-md-4 left-qa">
                            <div role="tabpanel tab-all">
                                <!-- Nav tabs -->
                                <div class="t-panel">
                                    <p ng-click="selectTab('all')" ng-class="{'active':currentTab == 'all'}">All</p>
                                    <p ng-click="selectTab('answered')" ng-class="{'active':currentTab == 'answered'}">Answered</p>
                                    <p ng-click="selectTab('unanswered')" ng-class="{'active':currentTab == 'unanswered'}">Unanswered</p>
                                </div>
                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane active" id="tab-1">
                                        <div class="group-item-qa" ng-if="listQuestions" scroller="askQuestion" data-on-total-scroll="loadMorePost" >
                                            <div  ng-repeat="question in listQuestions | unique:'pid'" class="item-qa clearfix" ng-class="{'active':question.pid == currentPid}"
                                                  ng-click="selectQuestion(question.pid)">
                                                <div class="col-md-3">
                                                    <a><img class="avatar-fix-max-size60" ng-src="{{question.imageUrl}}" alt="avatar"></a>
                                                </div>
                                                <div class="col-md-9 bx-dt-qa">
                                                    <h5>{{question.firstName + " "+ question.lastName}}<span class="time"> asked {{convertUnixTimeToTime(question.timestamp)}} ago</span></h5>
                                                    <p><span>in</span> <b>{{question.subject}}</b></p>
                                                    <p>
                                                    <p>{{ question.content | limitTo: 185 }}{{question.content.length > 185 ? '...' : ''}}</p>
                                                    </p>
                                                    <div class="clearfix bt-item">
                                                        <div class="col-md-6 replied" ng-if="question.timeanswer"><h6>Replied<span>&nbsp;{{convertUnixTimeToTime(question.timeanswer)}} ago</span></h6></div>
                                                        <div class="col-md-6 replied" ng-if="!question.timeanswer"><h6>No replied</h6></div>
                                                        <div class="col-md-6">
                                                            <p class="list-view">
                                                                {{question.numReplies}} <span data-icon="&#x77;"></span>&nbsp;&nbsp;
                                                                {{question.numViews}} <i class="fa fa-eye" aria-hidden="true"></i>&nbsp;&nbsp;
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div ng-if="notFound">{{notFound}}</div>
                                        <!--<p class="btn-load"><a href="javascript:void(0)"></a></p>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8 box-main-replied">
                            <div class="slider-rpl">
                                <div class="box-btn-sl clearfix" style="margin-top: 5px">
                                    <a href="javascript:void(0)" class="btn-prev"><span ng-click="nextQuestion('prev')" data-icon="&#x34;"></span></a>
                                    <a href="javascript:void(0)" class="btn-next"><span  ng-click="nextQuestion('next')" data-icon="&#x35;"></span></a>
                                </div>
                                <div class="group-item-sl">
                                    <div class="item-sl-rpl">
                                        <p class="text-rpl">{{questionDetail.numReplies}} Replied</p>
                                        <div class="bx-detail-rpl">
                                            <div class="top-rpl clearfix">
                                                <div class="col-md-2">
                                                    <img class="avatar-fix-max-size60" ng-src="{{questionDetail.avatar}}" alt="avatar">
                                                </div>
                                                <div class="col-md-6 bx-dt-qa">
                                                    <h5>{{questionDetail.firstName +" "+ questionDetail.lastName}}</h5>
                                                    <span class="time">asked {{questionDetail.timeStamp}} ago</span>
                                                    <p class="txt-category"><b>{{questionDetail.subject}}</b></p>
                                                </div>
                                                <div class="col-md-4 bt-item">
                                                    <p class="list-view">
                                                        <a href="javascript:void(0)">{{questionDetail.numview}} <i class="fa fa-eye" aria-hidden="true"></i></a>&nbsp;&nbsp;
                                                    </p>
                                                </div>
                                            </div>
                                            <p class =" pre-wrap">{{questionDetail.question_text}}</p>
                                            <div class="images-question">
                                                <ul>
                                                    <li class="item" ng-repeat="image in questionDetail.imagePath">
                                                        <div class="item-img"  ng-mouseover="imageHoverIn(questionDetail.question_id +''+$index)" ng-mouseleave="imageHoverOut(questionDetail.question_id +''+$index)" ng-click="zoomImage(image)">
                                                            <img ng-src="{{image}}">
                                                            <div class="item-hover" id="{{questionDetail.question_id}}{{$index}}">
                                                                <img src="assets/images/ask question/look-img.png" ng-click="zoomImage(image)">
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div><!-- /End Images of question -->
                                            <div class="popup-images">
                                                <div class="popup-images-wrapper">
                                                    <img ng-src="{{currentImage}}" width="800px" height="600px">

                                                </div>
                                                <div class="close-popup-images" ng-click="closePopupAskQuestion()">
                                                </div>
                                            </div><!-- /End POPUP of images's question -->
                                            <div class="form-chat">
                                                <form action="">
                                                    <div ng-if="QAErrorMsg" class="validate_error">
                                                        <span>{{QAErrorMsg}}</span>
                                                    </div>
                                                    <div class="box-chat-onl clearfix">
                                                        <a class="col-md-1"> <img class="avatar-fix-max-size60" ng-src="{{mentorAvatar}}" alt=""></a>
                                                        <div class="texta">
                                                            <textarea name="" id="txtAnswer" class="col-md-11" placeholder="Add your reply here" ></textarea>
                                                            <div class="left-border"></div>
                                                        </div>

                                                        <div class="icon-upload">
                                                            <!--<input class="input-file" name="file1" id="file1" type="file">-->
                                                            <input class="input-file" type="file" multiple  id="file1" ng-file-select="onFileSelect($files)"
                                                                   accept='image/*'/>
                                                            <!--<label for="file1" class="label-1">-->
                                                            <!--<img src="assets/images/img-upload.png" alt="">-->
                                                            <!--</label>-->
                                                        </div>

                                                    </div>
                                                    <!--<div class="add-image">-->
                                                        <!--<p class="upload-image">-->
                                                            <!--<output id="list"></output>-->
                                                            <!--<span class="add-img">-->
                                                                            <!--<input type="file" class="input-file-2" id="files" name="files[]" multiple /><label for="files"><img src="../images/add-img.png"></label>-->
                                                                        <!--</span>-->
                                                        <!--</p>-->
                                                        <!--<button class="reply">Reply</button>-->
                                                    <!--</div>-->
                                                    <div class="add-image">
                                                    <output class="upload-image" id="list"  style="width: auto;float: left;">
                                                        <div ng-repeat="step in stepsModel track by $index">
                                                            <img class="thumb" ng-src="{{step}}" />
                                                            <div class="remove-image"><img src="assets/images/remove-img.png" ng-click="removeImg($index)"></div>
                                                        </div>
                                                    </output>

                                                        <span class="add-img">
                                                            <label for="file1"><img style="margin-top: 5px" src="assets/images/add-img.png"></label>
                                                        </span>
                                                        <button ng-click="answerQuestion(questionDetail.question_id)" class="reply">Reply</button>
                                                    </div>
                                                    <p></p>
                                                    <div class="detail-chat">
                                                        <!--<ul class="chat">-->
                                                            <!--<li class="right clearfix">-->
                                                                            <!--<span class="chat-img pull-right">-->
                                                                                <!--<img src="../images/user.jpg" alt="User Avatar">-->
                                                                            <!--</span>-->
                                                                <!--<div class="chat-body clearfix">-->
                                                                    <!--<div class="header">-->
                                                                        <!--<strong class="pull-right primary-font"><a href="#">You</a></strong><span class="pull-right time">asked 1 mins ago</span>8 <span class="like-h" data-icon="&#xe089;"></span>-->
                                                                    <!--</div>-->
                                                                    <!--<p>-->
                                                                        <!--Donec volutpat turpis risus, ac aliquet ligula varius ut. Cras lacus orci,<br/> scelerisque quis sem sed, condimentum cursus quam-->
                                                                    <!--</p>-->
                                                                <!--</div>-->
                                                            <!--</li>-->
                                                        <!--</ul>-->
                                                            <ul class="chat">
                                                            <li ng-repeat="answer in listAnswer | unique:'aid'" class="clearfix {{userId == answer.authorID ? 'right' : 'left'}}">
                                                                            <span class="chat-img" ng-class="{'pull-right':userId == answer.authorID,'pull-left':userId != answer.authorID}">
                                                                                <img class="avatar-fix-max-size60" ng-src="{{answer.imageUrl}}" alt="Avatar">
                                                                            </span>
                                                                <div class="chat-body clearfix">
                                                                    <div class="header" ng-if="userId == answer.authorID">
                                                                        <strong class="primary-font pull-right" ></strong>
                                                                        <span class="pull-right time" >Replied {{convertUnixTimeToTime(answer.TIMESTAMP)}} ago</span>{{answer.numlike}}
                                                                        <span class="like-h" data-icon="&#xe089;"></span>
                                                                    </div>
                                                                    <div class="header" ng-if="userId != answer.authorID">
                                                                        <strong class="primary-font pull-left"><a>{{answer.firstName +" " +answer.lastName}}</a></strong>
                                                                        <span class="time pull-left" >Replied {{convertUnixTimeToTime(answer.TIMESTAMP)}} ago</span>{{answer.numlike}}
                                                                        <span class="like-h" data-icon="&#xe089;"></span>
                                                                    </div>
                                                                    <p class="pre-wrap">{{answer.content}}</p>
                                                                </div>
                                                            </li>
                                                        </ul>

                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    <!--item-sl-rpl-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /End Content of page -->

            </section>
        </div>
    </div>
</div>
<!-- /End Main center content -->
<!-- Sidebar right -->
<div id="sidebar-right" ng-include="sidebarRight"></div>
<!-- End Sidebar right -->