GET_DATE_TIME = SELECT UNIX_TIMESTAMP(now()) as currentTime;

VIDEO_DATA_READ=SELECT * FROM 'Sib_Videos`;

SIB_REGISTER_USER=insert into Sib_Users (userName, password, imageUrl) values (?, ?, ?);

SIB_ADMIN_REGISTER_USER=INSERT INTO `Sib_Users` (`firstName`,`lastName`,`userName`, `password`, `userType`,`enableFlag`) VALUES (?, ?,?, ?, 'A', 'Y');

SIB_REGISTER_USER_EXIST=SELECT username from Sib_Users where username=?;

SAVE_DEFAULT_SUBJECT=UPDATE Sib_Users SET defaultSubjectId = ? WHERE userid = ?;

GET_PROFILE=SELECT U.userid, U.username, U.usertype, U.firstname, U.lastName, U.imageUrl, U.school, U.email, U.description, AVG(V.averageRating) avgrate,  U.currentClass, U.accomplishments, U.bio, UNIX_TIMESTAMP(U.`bod`) as birthDay, UNIX_TIMESTAMP(U.`registrationTime`) registrationTime, UNIX_TIMESTAMP(U.`lastOnline`) lastOnline, U.defaultSubjectId, U.points, U.enableFlag, U.idFacebook, U.idGoogle, U.gender, U.favorite, U.isOnline FROM Sib_Users U LEFT JOIN Sib_Videos V ON userid = V.authorID WHERE userid = ?;

FIND_USER=SELECT username,usertype,firstname,lastName,imageUrl,school,currentClass,accomplishments,subjects,helpSubjects,bio from Sib_Users where  firstname=?;

UPDATELASTONLINETIME=update Sib_Users set lastonline=now(), isOnline=1 where username=?;

GET_USERS_BY_USER_TYPE=SELECT `Sib_Users`.`userid`,`Sib_Users`.`userName`,`Sib_Users`.`userType`,`Sib_Users`.`firstName`,`Sib_Users`.`lastName`,`Sib_Users`.`imageUrl`,`Sib_Users`.`school`,`Sib_Users`.`currentClass`,`Sib_Users`.`accomplishments`,`Sib_Users`.`subjects`,`Sib_Users`.`helpSubjects`,`Sib_Users`.`bio`,`Sib_Users`.`registrationTime`,`Sib_Users`.`lastOnline`,`Sib_Users`.`defaultSubjectId`,`Sib_Users`.`points`FROM `Sib_Users` WHERE userType=?;

GET_ALL_USERS=SELECT `Sib_Users`.`userid`,`Sib_Users`.`userName`,`Sib_Users`.`userType`,`Sib_Users`.`firstName`,`Sib_Users`.`lastName`,`Sib_Users`.`imageUrl`,`Sib_Users`.`school`,`Sib_Users`.`currentClass`,`Sib_Users`.`accomplishments`,`Sib_Users`.`bio`,`Sib_Users`.`registrationTime`,`Sib_Users`.`lastOnline`,`Sib_Users`.`defaultSubjectId`,`Sib_Users`.`points`FROM `Sib_Users`;

GET_USER_BY_ID=SELECT userid, userName, userType, firstName, lastName, topMentor FROM Sib_Users WHERE topMentor = ?;

CHECK_USER=SELECT * FROM Sib_Users WHERE userName=?;

CREATE_USER_FACEBOOK=INSERT INTO Sib_Users(userName, userType, firstName, lastName, imageUrl, idFacebook, lastonline , isOnline) VALUES (?, ?, ?, ?, ?, ?, now(), 1);

UPDATE_INFO_FACEBOOK=UPDATE Sib_Users set firstName = ?, lastName = ?, imageUrl = ? , lastonline = now(), isOnline=1 WHERE idFacebook = ?;

CREATE_USER_GOOGLE=INSERT INTO Sib_Users(userName, userType, firstName, lastName, imageUrl, idGoogle, lastonline , isOnline) VALUES (?, ?, ?, ?, ?, ?, now(), 1);

UPDATE_INFO_GOOGLE=UPDATE Sib_Users set firstName = ?, lastName = ?, imageUrl = ?, lastonline = now(), isOnline=1 WHERE idGoogle = ?;

GET_USER_BY_USERNAME=SELECT * FROM Sib_Users WHERE userName = ?;

SIB_LOGIN_USER=SELECT userid, password, username, firstname, lastname, userType, defaultSubjectId, password from Sib_Users where username = ?

SIB_ADMIN_LOGIN_USER=SELECT userid from Sib_Users where  username=? and password=? AND userType = 'A';

SIB_RESET_PASSWORD= UPDATE Sib_Users set password =?, code=null where  code=?;

SIB_IS_USERNAME_AVAIBALE =SELECT userid from Sib_Users where  username=?;

#SIB_UPDATE_USER_PROFILE=UPDATE Sib_Users set currentClass = ?, accomplishments = ?, helpSubjects= ? where username = ?;

#SIB_UPDATE_USER_PROFILE_BASIC=UPDATE Sib_Users set firstName = ?, lastName = ?, bio = ? where username = ?;
							
#SIB_INSERT_VIDEO=INSERT INTO Sib_Videos (title,author,authorID,subject,topic,subTopic,description,image,url,runningtime,timeStamp,topicId) values  (?,?,?,?,?,?,?,?,?,?,now(),?);

SIB_INSERT_VIDEO=INSERT INTO Sib_Videos (title,author,authorID,subject,topic,subTopic,description,image,url,runningtime,timeStamp,topicId,subjectId,videoEnable) values (?,?,?,?,?,?,?,?,?,?,now(),?,?,'Y');

#SIB_GET_VID=SELECT vid from Sib_Videos where authorID=? and url=?;

SIB_GET_VID=SELECT vid from Sib_Videos where subjectId=? and topicId=? and subTopic=?;

SIB_VIDEO_MENTORS_READ=SELECT userId,firstName,lastName,points,school, imageUrl FROM Sib_Users where helpSubjects like (select concat(?,subject,?) from Sib_Subject where subjectId = ? ) and userType='M';

SIB_STUDENT_MENTORS=SELECT distinct mentorId, firstName, lastName, school, points, imageUrl from Sib_Users su, Sib_Mentor_Reviewd_Student smrs where su.userId = smrs.mentorId and smrs.studentId = ? and su.userType = 'M' order by firstName;

#GET_STUDENT_POST_LIST_PN=SELECT sfp.pid, content, numViews, sum(likePost) upvotes, topic.topic FROM Sib_Forum_Post sfp, Sib_Post_Like spl, Sib_Topic topic where sfp.pid = spl.pid and sfp.topicId = topic.topicId and authorID = ? group by sfp.pid, content, numViews limit ?, ?;

GET_STUDENT_POST_LIST_PN=SELECT sfp.pid, subjectId, topicId, content, numViews, (SELECT COUNT(*) FROM Sib_Post_Like WHERE pid = sfp.pid AND likePost = 1) AS countLike FROM Sib_Forum_Post sfp  where authorID = ? group by sfp.pid, content, numViews ORDER BY sfp.pid DESC limit ?, ?;

GET_STUDENT_POST_LIST_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Forum_Post where authorID = ?;

SIB_MENTOR_REVIEWS_READ=SELECT mentorId,firstName,lastName, Rating,smrs.notes, lastUpdateDate, vid.subTopic from Sib_Users su , Sib_Videos vid, Sib_Mentor_Reviewd_Student smrs  LEFT OUTER JOIN  Sib_User_Watch_Video uwv ON uwv.uid= smrs.studentId where su.userId=smrs.mentorId and uwv.vid = vid.vid and smrs.studentId=? and su.userType='M' order by firstName limit ?,?;

SIB_MENTOR_REVIEWS_READ_COUNT=SELECT count(*)  as COUNT from Sib_Users su , Sib_Mentor_Reviewd_Student smrs where su.userId=smrs.mentorId and smrs.studentId=? and su.userType='M';

GET_NOTE_USER=SELECT studentId, mentorId, note, creationDate FROM Sib_User_Notes where studentId = ?;

INSERT_USER_NOTE=insert into Sib_User_Notes(studentId, mentorId, note) values(?, ?, ?)

SIB_INSERT_TAG=insert into Sib_Video_Tag(vid,tag) values(?,?);

SIB_REMOVE_VIDEO=UPDATE Sib_Videos SET videoEnable ='N' WHERE vid=?;

SIB_GET_VIDEO=SELECT v.vid, title, author, authorId, subject, v.subjectId, topic, v.topicId, subtopic, description, image , url, runningTime, numViews, numRatings, numComments, (SELECT avg(rating) FROM Sib_Video_Rating  WHERE vid = ?) AS rating from Sib_Videos v WHERE v.vid = ? AND videoEnable = 'Y';

GET_RATING_VIDEO=SELECT avg(rating) rating FROM Sib_Video_Rating WHERE vid = ?;

GET_RATING_VIDEO_ADMISSION=SELECT avg(rating) rating FROM Sib_Video_Admission_Rating WHERE vid = ?;

SIB_GET_TAGS=SELECT vid,tag FROM Sib_Video_Tag WHERE vid=?;

#SIB_GET_COMMENTS=SELECT sc.cid,sc.author,sc.authorId,sc.content,sc.numLike,sc.numReplies,sc.image,sc.timestamp FROM Sib_Video_Comments  svc ,Sib_Comments sc ,Sib_Videos sv WHERE svc.vid=sv.vid AND svc.cid=sc.cid AND sc.active='Y'  AND sv.vid=?;
#SIB_GET_COMMENTS=select vid, vc.cid, status, com.cid, author, authorId, content, numLike, numReplies, image, CAST((SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(timeStamp, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(timestamp, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(timestamp, NOW())), ' minutes')) AS CHAR(10000) CHARACTER SET utf8) timestamp, active, parent_cid, child_cid from Sib_Video_Comments vc, Sib_Comments com LEFT OUTER JOIN Sib_Nested_Comments nes ON com.cid = nes.child_cid where (vc.cid = com.cid OR vc.cid = nes.parent_cid) AND vc.vid = ? GROUP BY com.cid order by vc.cid DESC;

SIB_GET_COMMENTS=select vid, vc.cid, status, com.cid, SU.userName author, authorId, content, numLike, numReplies, image, CAST((SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(timeStamp, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(timestamp, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(timestamp, NOW())), ' minutes')) AS CHAR(10000) CHARACTER SET utf8) timestamp, (SELECT count(*) FROM Sib_Comment_Like scl, Sib_Comments sc WHERE scl.cid = sc.cid AND scl.likecomment = 'Y' AND scl.cid = vc.cid) countLike, active, parent_cid, child_cid from Sib_Video_Comments vc, Sib_Comments com JOIN Sib_Users SU on SU.userId = com.authorId LEFT OUTER JOIN Sib_Nested_Comments nes ON com.cid = nes.child_cid where (vc.cid = com.cid OR vc.cid = nes.parent_cid) AND vc.vid = ? GROUP BY com.cid order by vc.cid DESC;

#SIB_GET_COMMENTS_PN=select vid, vc.cid, status, SU.userName author, SU.userId authorId, SU.firstName, SU.lastName, content, numLike, numReplies, image, (SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(timestamp, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(timestamp, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(timestamp, NOW())), ' minutes')) timestamp, (SELECT count(*) FROM Sib_Comment_Like scl, Sib_Comments sc WHERE scl.cid = sc.cid AND scl.likecomment = 'Y' AND scl.cid = vc.cid) countLike, active, nes.parent_cid, nes.child_cid from Sib_Video_Comments vc, Sib_Comments com JOIN Sib_Users SU on SU.userId = com.authorId LEFT OUTER JOIN Sib_Nested_Comments nes ON com.cid = nes.child_cid where (vc.cid = com.cid OR vc.cid = nes.parent_cid) AND vc.vid = ? GROUP BY com.cid order by vc.cid DESC limit ?, ?;

SIB_GET_COMMENTS_PN=select vid, vc.cid, status, SU.userName author, SU.userId authorId, SU.firstName, SU.lastName, content, numLike, numReplies, SU.imageUrl image, SU.idFacebook, SU.idGoogle, SU.userType, UNIX_TIMESTAMP(com.timestamp) timestamp, (SELECT count(*) FROM Sib_Comment_Like scl, Sib_Comments sc WHERE scl.cid = sc.cid AND scl.likecomment = 'Y' AND scl.cid = vc.cid) countLike, active, nes.parent_cid, nes.child_cid from Sib_Video_Comments vc, Sib_Comments com JOIN Sib_Users SU on SU.userId = com.authorId LEFT OUTER JOIN Sib_Nested_Comments nes ON com.cid = nes.child_cid where (vc.cid = com.cid OR vc.cid = nes.parent_cid) AND vc.vid = ? GROUP BY com.cid order by vc.cid DESC limit ?, ?;

SIB_GET_COMMENTS_PN_COUNT=select count(*) as COUNT from Sib_Video_Comments vc, Sib_Comments com LEFT OUTER JOIN Sib_Nested_Comments nes ON com.cid = nes.child_cid where (vc.cid = com.cid OR vc.cid = nes.parent_cid) AND vc.vid = ? ;

SIB_GET_VIDEO_ADMISSION_COMMENTS_PN=SELECT vId, SVAC.cid, status, SU.userName author, SU.imageUrl imageUser, SU.userId authorId, SU.firstName, SU.lastName, SU.idFacebook, SU.idGoogle, content, numLike, numReplies, image, UNIX_TIMESTAMP(com.timestamp) creationDate, (SELECT count(*) FROM Sib_Comment_Like scl, Sib_Comments sc WHERE scl.cid = sc.cid AND scl.likecomment = 'Y' AND scl.cid = SVAC.cid) countLike, active from Sib_Video_Admission_Comments SVAC, Sib_Comments com JOIN Sib_Users SU on SU.userId = com.authorId where SVAC.cid = com.cid AND SVAC.vId = ? GROUP BY com.cid order by SVAC.cid DESC limit ?, ?;

SIB_GET_VIDEO_ADMISSION_COMMENTS_PN_COUNT=SELECT count(*) as COUNT from Sib_Video_Admission_Comments SVAC, Sib_Comments COM WHERE SVAC.cid = COM.cid AND SVAC.vId = ?;

SIB_GET_ARTICLE_COMMENTS_PN=SELECT arId, SAC.cid, status, SU.userName author, SU.userId authorId, SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, content, numLike, numReplies, image, UNIX_TIMESTAMP(com.timestamp) creationDate, (SELECT count(*) FROM Sib_Comment_Like scl, Sib_Comments sc WHERE scl.cid = sc.cid AND scl.likecomment = 'Y' AND scl.cid = SAC.cid) countLike, active from Sib_Article_Comments SAC, Sib_Comments com JOIN Sib_Users SU on SU.userId = com.authorId where SAC.cid = com.cid AND SAC.arId = ? order by SAC.cid DESC limit ?, ?;

SIB_GET_ARTICLE_COMMENTS_PN_COUNT=SELECT count(*) as COUNT from Sib_Article_Comments SAC, Sib_Comments COM WHERE SAC.cid = COM.cid AND SAC.arId = ?;

SIB_GET_ESSAY_COMMENTS_PN=SELECT eid, SEC.cid, status, SU.userName author, SU.userId authorId, SU.firstName, SU.lastName, content, numLike, numReplies, image, UNIX_TIMESTAMP(com.timestamp) creationDate, (SELECT count(*) FROM Sib_Comment_Like scl, Sib_Comments sc WHERE scl.cid = sc.cid AND scl.likecomment = 'Y' AND scl.cid = SEC.cid) countLike, active from Sib_Essay_Comments SEC, Sib_Comments com JOIN Sib_Users SU on SU.userId = com.authorId where SEC.cid = com.cid AND SEC.eid = ? GROUP BY com.cid order by SEC.cid DESC limit ?, ?;

SIB_GET_ESSAY_COMMENTS_PN_COUNT=SELECT count(*) as COUNT from Sib_Essay_Comments SEC, Sib_Comments COM WHERE SEC.cid = COM.cid AND SEC.eid = ?;

SIB_EDIT_VIDEO=UPDATE Sib_Videos set title = ?,description=? where vid= ?

SIB_DELETE_TAGS= DELETE from Sib_Video_Tag where vid=?;

SIB_CHECK_RATE_VIDEO=SELECT * FROM Sib_Video_Rating WHERE uid = ? AND vid = ?;

SIB_CHECK_RATE_VIDEO_ADMISSION=SELECT * FROM Sib_Video_Admission_Rating WHERE uid = ? AND vid = ?;

SIB_RATE_VIDEO=INSERT INTO Sib_Video_Rating(vid, uid, rating) VALUE(?, ?, ?);

SIB_RATE_VIDEO_ADMISSION=INSERT INTO Sib_Video_Admission_Rating(vid,uid,rating) VALUE(?, ?, ?);

SIB_RATE_UPDATE_VIDEO=UPDATE Sib_Video_Rating set rating = ? where vid = ? and uid = ?;

SIB_RATE_UPDATE_VIDEO_ADMISSION=UPDATE Sib_Video_Admission_Rating set rating = ? where vid = ? and uid = ?;

SIB_GET_VIDEO_WITH_TOPIC=SELECT sv.vid, title, author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments, u.points from Sib_Videos sv, Sib_Users u WHERE  u.userid = sv.authorId  AND sv.videoEnable='Y' AND sv.topicId =? ORDER BY vid DESC;

#SIB_GET_VIDEO_WITH_TOPIC_PN=SELECT sv.vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments, points from Sib_Videos sv, Sib_Users us WHERE  sv.videoEnable='Y' AND sv.authorId = us.userid AND sv.topicId = ? AND sv.subjectId= ?  limit ?,?;

GET_VIDEO_ORDER_SYLLABUS_PN=SELECT sv.vid, title, author, authorId, Subject, topic, subtopic, description, image, url, runningTime, numViews, numRatings, numComments, points from Sib_Videos sv, Sib_Users us WHERE  sv.videoEnable = 'Y' AND sv.authorId = us.userid AND sv.topicId = ? AND sv.subjectId = ? ORDER BY timeStamp DESC limit ?,?;

GET_VIDEO_ORDER_RATING_PN=SELECT sv.vid, title, author, authorId, Subject, topic, subtopic, description, image, url, runningTime, numViews, numRatings, numComments, points from Sib_Videos sv, Sib_Users us WHERE  sv.videoEnable = 'Y' AND sv.authorId = us.userid AND sv.topicId = ? AND sv.subjectId = ? ORDER BY numRatings DESC limit ?,?;

GET_VIDEO_ORDER_VIEW_PN=SELECT sv.vid, title, author, authorId, Subject, topic, subtopic, description, image, url, runningTime, numViews, numRatings, numComments, points from Sib_Videos sv, Sib_Users us WHERE  sv.videoEnable = 'Y' AND sv.authorId = us.userid AND sv.topicId = ? AND sv.subjectId = ? ORDER BY numViews DESC limit ?,?;

GET_VIDEO_PN=SELECT sv.vid, us.firstName, us.lastName, title, author, authorId, Subject, topic, subtopic, sv.description, image, url, runningTime, numViews, numRatings, numComments, points, (SELECT avg(rating) FROM Sib_Video_Rating WHERE vid = sv.vid) as rating FROM Sib_Videos sv, Sib_Users us WHERE sv.videoEnable = 'Y' AND sv.authorId = us.userid AND sv.topicId = ? AND sv.subjectId = ? ORDER BY chapter, title limit ?, ?;

SIB_GET_VIDEO_WITH_TOPIC_PN_COUNT=SELECT count(*) as COUNT from Sib_Videos WHERE videoEnable='Y' AND subjectId = ? AND topicId = ?;

SIB_GET_VIDEO_WITH_SUB_TOPIC=SELECT sv.vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments from Sib_Videos sv WHERE sv.videoEnable='Y' and sv.subjectId =?  AND  sv.subtopic=? AND sv.topic =?;

SIB_GET_VIDEO_WITH_SUB_TOPIC_PN=SELECT sv.vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments from Sib_Videos sv WHERE sv.videoEnable='Y' and sv.subject =?  AND  sv.subtopic=? AND sv.topic =? limit ?,?;

SIB_GET_VIDEO_WITH_SUB_TOPIC_PN_COUNT=SELECT count(*) as COUNT from Sib_Videos sv WHERE sv.videoEnable='Y' and sv.subject =?  AND  sv.subtopic=? AND sv.topic =?;

#SIB_GET_VIDEO_WITH_SUBJECT=SELECT sv.vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments from Sib_Videos sv WHERE sv.videoEnable='Y' and sv.subject =?;
#SIB_SEARCH_VIDEOS=SELECT vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos  WHERE MATCH(title) AGAINST(? IN BOOLEAN MODE)  ORDER BY MATCH(title) AGAINST(? IN BOOLEAN MODE);
SIB_SEARCH_VIDEOS=SELECT vid, title, author, authorId, Subject, subjectId, topic, topicId, subtopic, description, image, url, runningTime, numViews, numRatings, numComments FROM Sib_Videos where title like ? or description like ? order by title,description;
 
SIB_GET_VIDEOS=SELECT vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos limit 0,10;

GET_VIDEOS_LIST = SELECT vid, title,author, authorId,v.Subject,topic,subtopic,v.description,v.image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos v, Sib_Subject s where v.subject=s.subject order by vid

GET_VIDEOS_LIST_SUBID=SELECT vid, title,author, authorId,v.Subject,topic,subtopic,v.description,v.image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos v, Sib_Subject s where v.subjectId=s.subjectId and s.subjectId =? order by vid

GET_VIDEOS_LIST_PN = SELECT vid, title,author, authorId,v.Subject,topic,subtopic,v.description,v.image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos v, Sib_Subject s where v.subject=s.subject order by vid  limit ?,?;

GET_VIDEOS_LIST_SUBID_PN = SELECT vid, title,author, authorId,v.Subject,topic,subtopic,v.description,v.image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos v, Sib_Subject s where v.subject=s.subject and s.subjectId =? order by vid  limit ?,?;

GET_VIDEOS_LIST_PN_COUNT = SELECT count(*) as COUNT FROM Sib_Videos v, Sib_Subject s where v.subject=s.subject ;

GET_VIDEOS_LIST_SUBID_PN_COUNT = SELECT count(*) as COUNT FROM Sib_Videos v, Sib_Subject s where v.subject=s.subject and s.subjectId =?;

#MTDU
GET_HISTORY_VIDEOS_LIST = SELECT sv.*, su.firstName, su.lastName FROM Sib_Video_History svh, Sib_Videos sv, Sib_Users su WHERE svh.vid = sv.vid and sv.authorID = su.userid and svh.uid = ? ORDER BY svh.viewtime DESC;

CLEAR_HISTORY_VIDEOS_LIST = DELETE from Sib_Video_History WHERE uid = ?;

DELETE_HISTORY_VIDEO_BY_VID = DELETE from Sib_Video_History WHERE uid = ? and vid = ?;

SIB_GET_VIDEOS_PN=SELECT vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos limit ?,?;

SIB_GET_LIST_CATEGORY_SUBSCRIPTION = select subjectId, subject from Sib_Category where isForum = 0 and level = 0;

# Concatenate list recent videos, list week videos and list older videos
SIB_GET_ALL_VIDEO_SUBSCRIPTION = SELECT v.vid, v.authorID, v.title, v.image, v.averageRating, v.numComments, v.numViews, v.`timeStamp`, v.subjectId, v.url, CONCAT(u.firstName," ",u.lastName) author, 1 AS flag FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid AND v.authorID IN (SELECT s.MentorId FROM Sib_Student_Subcribe s WHERE s.StudentId = ? AND s.Subcribe = 'Y') AND v.subjectId in (SELECT subjectId FROM Sib_Category WHERE isForum = 0 AND level = 0) AND v.timeStamp >= ? UNION SELECT v.vid, v.authorID, v.title, v.image, v.averageRating, v.numComments, v.numViews, v.`timeStamp`, v.subjectId, v.url, CONCAT(u.firstName," ",u.lastName) author, 2 AS flag FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid AND v.authorID IN (SELECT s.MentorId FROM Sib_Student_Subcribe s WHERE s.StudentId = ? AND s.Subcribe = 'Y') AND v.subjectId in (SELECT subjectId FROM Sib_Category WHERE isForum = 0 AND level = 0) AND v.timeStamp >= ? AND v.timeStamp < ? UNION SELECT v.vid, v.authorID, v.title, v.image, v.averageRating, v.numComments, v.numViews, v.`timeStamp`, v.subjectId, v.url, CONCAT(u.firstName," ",u.lastName) author, 3 AS flag FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid AND v.authorID IN (SELECT DISTINCT s.MentorId FROM Sib_Student_Subcribe s WHERE s.newViewVideo = v.vid AND s.MentorId NOT IN (SELECT s1.MentorId FROM Sib_Student_Subcribe s1 WHERE s1.StudentId = ? AND s1.Subcribe = 'Y')) AND v.subjectId in (SELECT subjectId FROM Sib_Category WHERE isForum = 0 AND level = 0);

SIB_GET_ALL_VIDEO_SUBSCRIPTION_BY_CATEGORY = SELECT v.vid, v.authorID, v.title, v.image, v.averageRating, v.numComments, v.numViews, v.`timeStamp`, v.subjectId, v.url, CONCAT(u.firstName," ",u.lastName) author, 1 AS flag FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid AND v.authorID IN (SELECT s.MentorId FROM Sib_Student_Subcribe s WHERE s.StudentId = ? AND s.Subcribe = 'Y') AND v.timeStamp >= ? AND v.subjectId = ? UNION SELECT v.vid, v.authorID, v.title, v.image, v.averageRating, v.numComments, v.numViews, v.`timeStamp`, v.subjectId, v.url, CONCAT(u.firstName," ",u.lastName) author, 2 AS flag FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid AND v.authorID IN (SELECT s.MentorId FROM Sib_Student_Subcribe s WHERE s.StudentId = ? AND s.Subcribe = 'Y') AND v.timeStamp >= ? AND v.timeStamp < ? AND v.subjectId = ? UNION SELECT v.vid, v.authorID, v.title, v.image, v.averageRating, v.numComments, v.numViews, v.`timeStamp`, v.subjectId, v.url, CONCAT(u.firstName," ",u.lastName) author, 3 AS flag FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid AND v.authorID IN (SELECT DISTINCT s.MentorId FROM Sib_Student_Subcribe s WHERE s.newViewVideo = v.vid AND s.MentorId NOT IN (SELECT s1.MentorId FROM Sib_Student_Subcribe s1 WHERE s1.StudentId = ? AND s1.Subcribe = 'Y')) AND v.subjectId = ?;

#SIB_GET_LIST_VIDEO_OF_RECENT = SELECT v.*, CONCAT(u.firstName," ",u.lastName) author FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid and v.subjectId = ? and v.timeStamp >= ? order by v.vid;

#SIB_GET_LIST_VIDEO_OF_WEEK = SELECT v.*, CONCAT(u.firstName," ",u.lastName) author FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid and v.subjectId = ? and v.timeStamp >= ? and v.timeStamp < ? order by vid;

#SIB_GET_LIST_VIDEO_OLDER = SELECT v.* FROM Sib_Videos v, Sib_Student_Subcribe s WHERE v.vid = s.newViewVideo and s.StudentId = ? and s.Subcribe = 'N';

#SIB_SEARCH_VIDEOS_PN=SELECT vid, title,author, authorId,Subject, subjectId, topic, topicId, subtopic,description,image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos  WHERE MATCH(title) AGAINST(? IN BOOLEAN MODE)  ORDER BY MATCH(description) AGAINST(? IN BOOLEAN MODE) limit ?,?;

#SIB_SEARCH_VIDEOS_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Videos  WHERE MATCH(title) AGAINST(? IN BOOLEAN MODE)  ORDER BY MATCH(title) AGAINST(? IN BOOLEAN MODE);

SIB_SEARCH_VIDEOS_PN=SELECT vid, title, author, authorId, Subject, subjectId, topic, topicId, subtopic, description, image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Videos  WHERE title like ? limit ?,?;

SIB_SEARCH_VIDEOS_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Videos  WHERE title like ?;

SIB_SEARCH_VIDEO_TAG=SELECT sv.vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Video_Tag svt , Sib_Videos sv WHERE sv.vid=svt.vid and MATCH(tag) AGAINST(? IN BOOLEAN MODE) ORDER BY MATCH(tag) AGAINST(? IN BOOLEAN MODE);

SIB_SEARCH_VIDEO_TAG_PN=SELECT sv.vid, title,author, authorId,Subject,topic,subtopic,description,image ,url, runningTime,numViews,numRatings,numComments FROM Sib_Video_Tag svt , Sib_Videos sv WHERE sv.vid=svt.vid and MATCH(tag) AGAINST(? IN BOOLEAN MODE) ORDER BY MATCH(tag) AGAINST(? IN BOOLEAN MODE) limit ?,?;

SIB_SEARCH_VIDEO_TAG_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Video_Tag svt , Sib_Videos sv WHERE sv.vid=svt.vid and MATCH(tag) AGAINST(? IN BOOLEAN MODE) ORDER BY MATCH(tag) AGAINST(? IN BOOLEAN MODE);

SIB_GET_VIDEO_WITH_SUBJECT=SELECT topicId,topic,description,image from Sib_Topic where active ='Y' AND subjectId  =?;

SIB_GET_VIDEO_WITH_SUBJECT_PN=SELECT topicId,topic,description from Sib_Topic where active ='Y' AND subjectId  =? limit ?,?;

SIB_GET_VIDEO_WITH_SUBJECT_PN_COUNT=SELECT count(*) as COUNT from Sib_Topic where active ='Y' AND subjectId  =?;

SIB_GET_VIDEO_WITH_TOPICS=SELECT sv.vid, title, author, authorId, subject, subjectId, topic, subtopic, description, image, url, runningTime, numViews, numRatings, numComments, points from Sib_Videos sv, Sib_Users u WHERE u.userid = sv.authorId AND sv.videoEnable='Y' AND sv.subjectId = ? AND sv.topicId = ? ORDER BY sv.vid DESC LIMIT ?, ?;

SIB_GET_VIDEO_WITH_TOPICS_COUNT=SELECT count(*) as COUNT from Sib_Videos sv WHERE sv.videoEnable='Y' and sv.subject =?  AND   sv.topic =?;

TOPICS_READ=SELECT ss.subjectId, ss.subject, ss.description as subjectDescription, st.topicId,st.topic, st.description as topicDescription  FROM Sib_Topic st, Sib_Subject ss WHERE ss.subjectId = st.subjectId  AND ss.active = 'Y' AND st.active ='Y' and ss.subjectId =? order by st.topic

SIB_ADD_COMMENT=INSERT INTO Sib_Comments (author, authorId, content, timestamp) value (?, ?, ?, now());

SIB_LAST_INSERTED_COMMENT=SELECT cid, authorId from Sib_Comments WHERE authorId=? and content=? order by timestamp desc limit 1;

SIB_INSERT_VIDEO_COMMENT=INSERT INTO Sib_Video_Comments (cid, vid) VALUES (?, ? );

SIB_INSERT_VIDEO_ADMISSION_COMMENT=INSERT INTO Sib_Video_Admission_Comments (vId, cid) VALUES (?, ? );

SIB_INSERT_ESSAY_COMMENT=INSERT INTO Sib_Essay_Comments (eid, cid) VALUES (?, ? );

SIB_INSERT_ARTICLE_COMMENT=INSERT INTO Sib_Article_Comments (arId, cid) VALUES (?, ? );

SIB_INSERT_ANSWER_COMMENT=INSERT INTO Sib_Forum_Answer_Comment (aid,cid) VALUES (?,? );

#SEARCH_POST_ANSWERS=SELECT aid, pid, usr.userid, usr.userName, title, content, numViews, numReplies, image, CAST((SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(timeStamp, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(timestamp, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(timestamp, NOW())), ' minutes')) AS CHAR(10000) CHARACTER SET utf8) timeStamp FROM Sib_Forum_Answer ans, Sib_Users usr where ans.authorID = usr.userid and  pid=? and ans.enableFlag = 'Y' order by aid desc;

SEARCH_POST_ANSWERS=SELECT aid, pid, usr.userid, usr.userName, title, content, numViews, numReplies, image, CAST((SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(timeStamp, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(timestamp, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(timestamp, NOW())), ' minutes')) AS CHAR(10000) CHARACTER SET utf8) timeStamp, (SELECT COUNT(*) FROM Sib_Answer_like WHERE aid = ans.aid AND likeAnswer = 'Y') as countLike FROM Sib_Forum_Answer ans, Sib_Users usr where ans.authorID = usr.userid and  pid=? and ans.enableFlag = 'Y' order by aid desc;

SEARCH_ANSWER_COMMENTS=SELECT * FROM Sib_Comments c,Sib_Forum_Answer_Comment ac where c.cid=ac.cid and ac.aid=?;
        
SIB_UPDATE_VIDEO_COMMENT=UPDATE Sib_Videos set numComments = numComments + 1 WHERE vid = ?;

SIB_UPDATE_ARTICLE_COMMENT=UPDATE Sib_Article SET numComments = numComments + 1 WHERE arId = ?;

SIB_GET_NESTED_COMMENTS=SELECT sc.cid,sc.author,sc.authorId,sc.content, sc.numLike,sc.numReplies,sc.image,sc.timeStamp FROM Sib_Comments sc,  Sib_Nested_Comments snc WHERE sc.cid = snc.child_cid and snc.parent_cid=?;

SIB_INSERT_NESTED_COMMENT=INSERT INTO Sib_Comments (author,authorId,content,image,timestamp) value (?,?,?,?,now());

SIB_GET_NESTED_CID=SELECT cid from Sib_Comments WHERE authorId=? and content=?;

SIB_INSERT_NESTED_TABLE=INSERT INTO Sib_Nested_Comments (parent_cid,child_cid) VALUES (?,? );

SIB_EDIT_COMMENT=UPDATE Sib_Comments SET content =? WHERE cid = ?;

SIB_REMOVE_COMMENT= delete Sib_Comments WHERE cid=?;

LIKE_COMMENT_UPDATE=UPDATE `Sib_Comment_Like` SET `likecomment` = 'Y' WHERE uid = ? AND cid = ?;

UNLIKE_COMMENT_UPDATE=UPDATE `Sib_Comment_Like` SET `likecomment` = 'N' WHERE uid = ? AND cid = ?;

LIKE_COMMENT_READ=SELECT * FROM Sib_Comment_Like WHERE uid = ? and cid = ?;

LIKE_COMMENT_INSERT=INSERT INTO Sib_Comment_Like (`uid`, `cid`, `likecomment`) VALUES (?, ?, 'Y');

LIKE_COMEMENT_READ=SELECT * FROM Sib_Comment_Like WHERE uid = ? AND cid = ?

LIKE_COMEMENT_READ_CHECK=SELECT * FROM Sib_Comment_Like WHERE uid = ? AND cid = ? AND likecomment = 'Y';

LIKE_NUM_COMMENT_INSERT=INSERT INTO `Sib_Comments` (`cid`,`numLike`) VALUES (?,1);

LIKE_UPDATE=UPDATE `Sib_Comments` SET `numLike` = numLike+1 WHERE  cid=?;

UNLIKE_UPDATE=UPDATE `Sib_Comments` SET `numLike` = numLike-1 WHERE  cid=?;

VIDEO_FAVOURITE_INSERT=INSERT INTO Sib_Video_Favourite (`uid`,`vid`,`favourtetime`) VALUES (?,?,now());

VIDEO_FAVOURITE_READ_LIMIT=SELECT sv.*,su.firstName, su.lastName FROM Sib_Videos sv, Sib_Video_Favourite svf, Sib_Users su WHERE sv.vid = svf.vid and sv.authorID = su.userid and sv.videoEnable = 'Y' AND uid=? AND svf.favouritetime < ? ORDER BY svf.favouritetime Limit ?

VIDEO_FAVOURITE_READ_ALL_BY_USER=SELECT sv.*,su.firstName, su.lastName FROM Sib_Videos sv, Sib_Video_Favourite svf, Sib_Users su WHERE sv.vid = svf.vid and sv.authorID = su.userid and sv.videoEnable = 'Y'AND svf.uid = ?;

VIDEO_FAVOURITE_UPDATE=UPDATE `Sib_Videos` SET `numFavourite` = IFNULL(numFavourite,0)+1 WHERE  vid=?;

VIDEO_UNFAVOURITE_UPDATE=UPDATE `Sib_Videos` SET `numFavourite` = IFNULL(numFavourite,0) - 1 WHERE  vid=?;

VIDEO_UNFAVOURITE_UPDATE_ALL_BY_USER = UPDATE Sib_Videos sv inner JOIN Sib_Video_Favourite svf ON sv.vid=svf.vid SET sv.numFavourite = sv.numFavourite - 1 WHERE svf.uid = ?;

VIDEO_FAVOURITE_DELETE=DELETE FROM Sib_Video_Favourite WHERE uid=?  AND vid=?;

VIDEO_FAVOURITE_DELETE_ALL=DELETE FROM Sib_Video_Favourite WHERE uid=?;

VIDEO_FAVOURITE_COUNT_BY_USER=SELECT count(*) FROM Sib_Video_Favourite svf WHERE svf.uid = ?


WATCH_VIDEO_READ=SELECT * FROM Sib_User_Watch_Video WHERE uid=? AND vid=?;

WATCH_VIDEO_INSERT=INSERT INTO Sib_User_Watch_Video (`uid`,`vid`) VALUES (?,?);

WATCH_VIDEO_UPDATE=UPDATE `Sib_Videos` SET `numViews` = numViews+1 WHERE  vid=?;

#CREATE_POST=INSERT INTO `Sib_forum_post` (`author`,`authorID`,`title`,`category`,`subcategory`,`content`,`image`,`timeStamp`,`updateTime`) VALUES (?,?,?,?,?,?,?,now(),now());

#CREATE_POST=INSERT INTO `Sib_Forum_Post` (`authorID`,`title`,`subjectId`,`topicId`,`content`,`image`,`timeStamp`,`updateTime`) VALUES (?,?,?,?,?,?,now(),now());

CREATE_POST=INSERT INTO `Sib_Forum_Post` (`authorID`, `subjectId`, `content`, `timeStamp`, `updateTime`) VALUES (?, ?, ?, now(), now());

SIB_NUM_REPLIES_UPDATE=UPDATE `Sib_Forum_Answer` SET `numReplies` = numReplies+1 WHERE  pid=?;

ANSWER_EDIT=UPDATE Sib_Forum_Answer set content=? where aid= ?

REMOVE_ANSWER=DELETE from Sib_Forum_Answer where aid = ?;

REMOVE_ANSWER_LIKE=DELETE FROM Sib_Answer_like WHERE aid = ?;

GET_POST_INFO=SELECT `sfp`.`pid`, `su`.`userid`, `su`.`userName`,`su`.`userType`, `sfp`.`title`, `ss`.`subject`, `ss`.`subjectId`, `st`.`topic`, `st`.`topicId`, `sfp`.`content`,`sfp`.`numViews`,`sfp`.`numReplies`,`sfp`.`image`,(SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(sfp.timeStamp, NOW())) / 24), ?, MOD(HOUR(TIMEDIFF(sfp.timeStamp, NOW())), 24), ?, MINUTE(TIMEDIFF(sfp.timeStamp, NOW())), ' minutes')) timeStamp,`sfp`.`updateTime` FROM `Sib_Forum_Post` sfp, Sib_Users su, Sib_Subject ss, Sib_Topic st where su.userId = sfp.authorId and ss.subjectId = sfp.subjectId and sfp.topicId = st.topicId and (pid = COALESCE(?,PID)) ORDER BY timeStamp Desc;

GET_POST_INFO_PN=SELECT `sfp`.`pid`,`su`.`userName`,`sfp`.`title`,`ss`.`subject`,`st`.`topic`, `sfp`.`content`,`sfp`.`numViews`,`sfp`.`numReplies`,`sfp`.`image`,`sfp`.`timeStamp`,`sfp`.`updateTime` FROM `Sib_Forum_Post` sfp, Sib_Users su, Sib_Subject ss , Sib_Topic st where su.userId=sfp.authorId and ss.subjectId=sfp.subjectId and sfp.topicId=st.topicId  and (pid= COALESCE(?,PID)) ORDER BY timeStamp Desc limit ?,?;

GET_POST_INFO_PN_COUNT=SELECT count(*) as COUNT  FROM `Sib_Forum_Post` sfp, Sib_Users su, Sib_Subject ss , Sib_Topic st where su.userId=sfp.authorId and ss.subjectId=sfp.subjectId and sfp.topicId=st.topicId  and (pid= COALESCE(?,PID)) ORDER BY timeStamp Desc;

GET_POST_LIST=SELECT * FROM Sib_Forum_Post  order by pid

GET_POST_SUBID_LIST=SELECT * FROM Sib_Forum_Post where subjectId = ? order by pid

GET_POST_LIST_PN=SELECT * FROM Sib_Forum_Post where visible = 1 order by pid DESC limit ?,?;

GET_POST_LIST_SUBID_PN=SELECT SU.userName, SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SFP.pid, SFP.authorID, SFP.title, SFP.subjectId, SFP.topicId, SFP.content, SFP.numViews, SFP.numReplies, UNIX_TIMESTAMP(SFP.timeStamp) timeStamp, UNIX_TIMESTAMP(SFP.updateTime) updateTime, SFP.enableFlag, (SELECT COUNT(*) FROM Sib_Post_Like WHERE pid = SFP.pid AND likePost = 1) AS countLike FROM Sib_Forum_Post AS SFP JOIN Sib_Users AS SU ON authorID = userid LEFT JOIN Sib_Post_Like AS SPK ON SPK.pid = SFP.pid WHERE subjectId = ? AND topicId = ? GROUP BY SFP.pid ORDER BY pid DESC limit ?, ?;

GET_POST_LIST_SUBJECTID_PN=SELECT SU.userName, SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SFP.pid, SFP.authorID, SFP.title, SFP.subjectId, SFP.topicId, SFP.content, SFP.numViews, SFP.numReplies, UNIX_TIMESTAMP(SFP.timeStamp) timeStamp, UNIX_TIMESTAMP(SFP.updateTime) updateTime, SFP.enableFlag, (SELECT COUNT(*) FROM Sib_Post_Like spl, Sib_Forum_Post sfp WHERE spl.pid = sfp.pid AND likePost = 1 AND spl.pid = SFP.pid) as countLike FROM Sib_Forum_Post as SFP join Sib_Users as SU on authorID = userid left join Sib_Post_Like as SPK on SPK.pid = SFP.pid where visible = 1 AND subjectId = ? group by SFP.pid order by pid DESC limit ?, ?;

GET_POST_LIST_SUBJECTID_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Forum_Post where visible = 1 AND subjectId = ?;

#GET_POST_LIST_SUBID_PN=SELECT SU.userName, SFP.pid, SFP.authorID, SFP.title, SFP.subjectId, SFP.topicId, SFP.content, SFP.numViews, SFP.numReplies, SFP.timeStamp, SFP.updateTime, SFP.enableFlag FROM Sib_Forum_Post as SFP join Sib_Users as SU on authorID = userid  where authorID = ? AND subjectId = ? AND topicId = ? order by pid limit ?, ?;

GET_POST_LIST_SUBID_RELATED_PN=SELECT SU.userName, SFP.pid, SFP.authorID, SFP.title, SFP.subjectId, SFP.topicId, SFP.content, SFP.numViews, SFP.numReplies, SFP.timeStamp, SFP.updateTime, SFP.enableFlag, (SELECT COUNT(*) FROM Sib_Post_Like WHERE pid = SFP.pid AND likePost = 1) AS countLike FROM Sib_Forum_Post AS SFP JOIN Sib_Users AS SU ON authorID = userid LEFT JOIN Sib_Post_Like AS SPK ON SPK.pid = SFP.pid WHERE SFP.visible = 1 AND subjectId = ? AND topicId = ? AND SFP.pid != ? GROUP BY SFP.pid ORDER BY pid DESC LIMIT ?, ?;

GET_POST_LIST_RELATED_PN=SELECT SU.userName, SFP.pid, SFP.authorID, SFP.title, SFP.subjectId, SFP.topicId, SFP.content, SFP.numViews, SFP.numReplies, SFP.timeStamp, SFP.updateTime, SFP.enableFlag, (SELECT COUNT(*) FROM Sib_Post_Like WHERE pid = SFP.pid AND likePost = 1) AS countLike FROM Sib_Forum_Post AS SFP JOIN Sib_Users AS SU ON authorID = userid LEFT JOIN Sib_Post_Like AS SPK ON SPK.pid = SFP.pid WHERE SFP.visible = 1 AND subjectId = ? AND SFP.pid != ? GROUP BY SFP.pid ORDER BY pid DESC LIMIT ?, ?;

GET_POST_LIST_SUBID_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Forum_Post WHERE visible = 1 AND subjectId = ? AND topicId = ?;

GET_POST_LIST_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Forum_Post WHERE visible = 1 AND subjectId = ?;

GET_POST_LIST_SUBID_MOBILE=SELECT * FROM Sib_Forum_Post where subjectId = ? order by pid desc limit ?,?;

GET_POST_LIST_MOBILE=SELECT * FROM Sib_Forum_Post order by pid  limit ?,?;

GET_POST_LIST_MOBILE_COUNT=SELECT count(*) as COUNT FROM Sib_Forum_Post where  subjectId = ?;

REMOVE_POST=DELETE from Sib_Forum_Post where pid=?;

REMOVE_ANSWER_BY_POST=DELETE FROM Sib_Forum_Answer WHERE pid = ?;

REMOVE_POST_LIKE=DELETE FROM Sib_Post_Like WHERE pid = ?;

GET_PID=SELECT max(pid) pid from Sib_Forum_Post where subjectId = ?;

#GET_POST_INFO=SELECT `Sib_forum_post`.`pid`,`Sib_forum_post`.`author`,`Sib_forum_post`.`authorID`,`Sib_forum_post`.`title`,`Sib_forum_post`.`category`,`Sib_forum_post`.`subcategory`,  `Sib_forum_post`.`content`,`Sib_forum_post`.`numViews`,`Sib_forum_post`.`numReplies`,`Sib_forum_post`.`image`,`Sib_forum_post`.`timeStamp`,`Sib_forum_post`.`updateTime` FROM `Sib_forum_post` where pid=?;

#GET_POSTS=SELECT p.pid,p.title,p.content,s.subject,t.topic FROM Sib_Forum_Post p,Sib_Subject s,Sib_Topic t where p.subjectId=s.subjectId AND p.topicId=t.topicId order by p.pid;

POST_INSERT_TAG=insert into Sib_forum_tags(pid,tag) values(?,?);

POST_GET_TAGS=SELECT pid,tag FROM Sib_forum_tags WHERE pid=?;

POST_DELETE_TAGS= DELETE from Sib_forum_tags where pid=?;


POST_INSERT_FORUM_COMMENT=INSERT INTO Sib_forum_post_comment (pid,cid) VALUES (?,? );

SEARCH_POSTS_IN_SUB_CATEGORY=SELECT `Sib_Forum_Post`.`pid`,`Sib_Forum_Post`.`author`,`Sib_Forum_Post`.`authorID`,`Sib_Forum_Post`.`title`,`Sib_Forum_Post`.`category`,`Sib_Forum_Post`.`subcategory`,  `Sib_Forum_Post`.`content`,`Sib_Forum_Post`.`numViews`,`Sib_Forum_Post`.`numReplies`,`Sib_Forum_Post`.`image`,`Sib_Forum_Post`.`timeStamp`,`Sib_Forum_Post`.`updateTime` FROM `Sib_Forum_Post` where subcategory=?;

POST_READ_FORUM_COMMENT=SELECT sc.cid,sc.author,sc.authorId,sc.content,sc.numLike,sc.numReplies,sc.image,sc.timestamp FROM Sib_forum_post_comment  svc ,Sib_Comments sc  WHERE  svc.cid=sc.cid AND  svc.pid=?;

#SEARCH_POST=SELECT  pid,author,authorID,title,category,subcategory,content,numViews,numReplies,image,timeStamp,updateTime FROM Sib_Forum_Post WHERE MATCH(title) AGAINST(? IN BOOLEAN MODE) ORDER BY MATCH(title) AGAINST(? IN BOOLEAN MODE) LIMIT 0,10 ;
SEARCH_POST=SELECT pid,authorId,title,content FROM Sib_Forum_Post where visible = 1 AND (content like? or title like ?) ORDER BY title,content Desc;

SEARCH_POSTS_IN_SUBCATEGORY=SELECT  pid,author,authorID,title,category,subcategory,content,numViews,numReplies,image,timeStamp,updateTime FROM Sib_Forum_Post WHERE MATCH(subcategory) AGAINST(? IN BOOLEAN MODE) ORDER BY MATCH(subcategory) AGAINST(? IN BOOLEAN MODE) LIMIT 0,10 ;

#SEARCH_POSTS_WITH_TAG=SELECT SU.userName, SU.firstName, SU.lastName, sfp.pid, authorID, title, content, numViews, numReplies, image, UNIX_TIMESTAMP(timeStamp) timeStamp, UNIX_TIMESTAMP(updateTime) updateTime, (SELECT COUNT(*) FROM Sib_Post_Like WHERE pid = sfp.pid AND likePost = 1) AS countLike FROM Sib_Forum_Post sfp JOIN Sib_Users AS SU ON userid = authorID, Sib_forum_tags sft WHERE sfp.pid = sft.pid AND MATCH(tag) AGAINST(? IN BOOLEAN MODE) ORDER BY MATCH(tag) AGAINST(? IN BOOLEAN MODE) limit ?, ?;

#SEARCH_POSTS_WITH_TAG=SELECT distinct SU.userName, SU.firstName, SU.lastName, sfp.pid, authorID, title, content, numViews, numReplies, sfp.image, UNIX_TIMESTAMP(timeStamp) timeStamp, UNIX_TIMESTAMP(updateTime) updateTime, (SELECT COUNT(*) FROM Sib_Post_Like WHERE pid = sfp.pid AND likePost = 1) AS countLike FROM Sib_Forum_Post sfp JOIN Sib_Users AS SU ON userid = authorID, Sib_forum_tags sft, Sib_Subject SS WHERE (sfp.pid = sft.pid AND MATCH(tag) AGAINST(? IN BOOLEAN MODE)) OR (sfp.subjectId = SS.subjectId AND SS.subject = ?) ORDER BY pid DESC limit ?, ?;

#SEARCH_POSTS_WITH_TAG=SELECT distinct SU.userName, SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, sfp.pid, authorID, title, content, numViews, numReplies, sfp.image, sfp.subjectId, sfp.topicId, UNIX_TIMESTAMP(timeStamp) timeStamp, UNIX_TIMESTAMP(updateTime) updateTime, (SELECT COUNT(*) FROM Sib_Post_Like WHERE pid = sfp.pid AND likePost = 1) AS countLike FROM Sib_Forum_Post sfp JOIN Sib_Users AS SU ON userid = authorID, Sib_forum_tags sft, Sib_Subject SS WHERE sfp.visible = 1 AND ( (sfp.pid = sft.pid AND MATCH(tag) AGAINST(? IN BOOLEAN MODE)) OR (sfp.subjectId = SS.subjectId AND SS.subject = ?) OR (sfp.content LIKE ?)) ORDER BY pid DESC limit ?, ?;

#GET_POST_LIST_SUBJECT_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Forum_Post sfp JOIN Sib_Users AS SU ON userid = authorID, Sib_forum_tags sft, Sib_Subject SS WHERE sfp.visible = 1 AND ( (sfp.pid = sft.pid AND MATCH(tag) AGAINST(? IN BOOLEAN MODE)) OR (sfp.subjectId = SS.subjectId AND SS.subject = ?));

#SUBJECTS_LIST_DATA_READ=SELECT subject_id,subject_name FROM Sib_Subject

#SUBJECTS_READ=SELECT  subject_id,subject_name,description,creation_date, image,active FROM Sib_Subject

SUBJECTS_LIST_DATA_READ=SELECT subjectId subject_id,subject subject_name FROM Sib_Subject

SUBJECTS_READ=SELECT subjectId subject_id, subject subject_name, description, creationDate creation_date, active, image, isForum FROM Sib_Subject;

#SUBJECTS_READ=select subject_id, subject_name, description, creation_date, active from saatya.saatya_subjects;

#CATAGERY_READ=SELECT s.subject_id, subject_name, s.description as subject_description, s.image as subject_icon, subject_category_id, subject_category_name, sc.description as subcategory_description, sc.image as category_icon FROM Sib_Subject_Sub_Categories sc, Sib_Subjects s WHERE s.subject_id = sc.subject_id and s.subject_id =? AND s.active = 'Y' AND sc.active ='Y' order by subject_category_name;
CATAGERY_READ=SELECT s.subject_id, subject_name, s.description as subject_description, s.image as subject_icon, subject_category_id, subject_category_name, sc.description as subcategory_description, sc.image as category_icon FROM Sib_Subject_Categories sc, Sib_Subjects s WHERE s.subject_id = sc.subject_id and s.subject_id =? AND s.active = 'Y' AND sc.active ='Y' order by subject_category_name;

GET_VEDIO_INFO=SELECT video_id,video_link,video_name,description,avg(rating) rating,video_id subject_sub_category_id,subject_category_id,subject_id FROM saatya_video_stream svs WHERE svs.video_id = ? AND svs.subject_category_id = ? AND svs.subject_id = ?;

#SUBCATAGERY_READ_PN=SELECT ssc.subject_category_id,ssc.subject_id,sssc.subject_sub_category_id,subject_sub_category_name,sssc.description,su.email_id,sssc.image,sssc.popular_video, sssc.video_time, su.first_name as created_by_fname, su.last_name as  created_by_lname, su.user_id as user_id, sssc.points, if(sssc.active='Y', ?,?) as active FROM Sib_Subject_Sub_Categories sssc, Sib_Users su, Sib_Subject_Categories ssc WHERE ssc.subject_category_id =sssc.subject_category_id  AND su.user_id =sssc.video_prepared_by AND su.user_type='M' AND sssc.video_prepared_by = su.user_id AND  sssc.subject_category_id = ? AND  ssc.subject_id = ?  AND ssc.active='Y'  ORDER BY sssc.subject_sub_category_id desc, sssc.rating desc,popular_video desc,sssc.points desc limit ?,?;

SUBCATAGERY_READ_PN=SELECT ssc.subject_category_id,ssc.subject_id,sssc.subject_sub_category_id,subject_sub_category_name,sssc.description,su.userName,sssc.image,sssc.popular_video, sssc.video_time, su.firstName as created_by_fname, su.lastName as  created_by_lname, su.userid as user_id, sssc.points, if(sssc.active='Y', ?,?) as active FROM Sib_Subject_Sub_Categories sssc, Sib_Users su, Sib_Subject_Categories ssc WHERE ssc.subject_category_id =sssc.subject_category_id  AND su.userid =sssc.video_prepared_by AND su.userType='M' AND sssc.video_prepared_by = su.userid AND  sssc.subject_category_id = ? AND  ssc.subject_id = ?  AND ssc.active='Y'  ORDER BY sssc.subject_sub_category_id desc, sssc.rating desc,popular_video desc,sssc.points desc limit ?,?;

#SUBCATAGERY_READ_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Subject_Sub_Categories sssc, Sib_Users su, Sib_Subject_Categories ssc WHERE ssc.subject_category_id =sssc.subject_category_id  AND su.user_id =sssc.video_prepared_by AND su.user_type='M' AND  sssc.subject_category_id = ? AND  ssc.subject_id = ? AND ssc.active='Y'  ORDER BY popular_video desc;

SUBCATAGERY_READ_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Subject_Sub_Categories sssc, Sib_Users su, Sib_Subject_Categories ssc WHERE ssc.subject_category_id =sssc.subject_category_id  AND su.userid =sssc.video_prepared_by AND su.userType='M' AND  sssc.subject_category_id = ? AND  ssc.subject_id = ? AND ssc.active='Y'  ORDER BY popular_video desc;

GET_COL_UNIVERSITIES=SELECT sch_colle_degree_id id, CONCAT(NAME, ?,CITY) name FROM Sib_School_College_Degree;

GET_MAJORS=select id, name from Sib_Profile_Setup where category=?;

GET_EXTRA_ACTIVITIES=select id,name from Sib_Profile_Setup where category=?;

MENTOR_LIST=select userid, firstName, lastName, school, points, enableFlag from Sib_Users where userType = 'M' order by ? limit ? offset ? ;

# Note: we used to set default status for TOP_MENTOR to be ?

MENTOR_LIST_SEARCH=select imageUrl, userid, firstName, lastName, school, points, enableFlag from Sib_Users where userType = 'M' and firstName Like ? limit ? offset ?;

MENTOR_LIST_FILTER=select imageUrl, userid, firstName, lastName, school, points, enableFlag from Sib_Users where userType = 'M'  order by ?, userid desc limit ?, ?;
#MENTOR_LIST_FILTER=select * from Sib_Users where userType = 'M' order by ? limit ?, ?;

MENTOR_LIST_FILTER_ONLINE=select * from Sib_Users where userType = 'M' order by enableFlag DESC limit ?, ?;

TOP_MENTOR=select userid,firstName,lastName,points, imageUrl FROM Sib_Users where userid =(SELECT mentor_id FROM Sib_Mentor_Subject_Mapping where points=(select max(points) from Sib_Mentor_Subject_Mapping where subject_id=? group by subject_id));

FETCH_FAQ=SELECT questionId, questionText, answerText, videoLink FROM Sib_Faq_Questions where faqCategory=? and active = 'Y'  ORDER BY ? LIMIT ? OFFSET ?;

FETCH_FAQ_TOP=SELECT questionId, questionText, answerText, active, creation_date, faqCategory FROM Sib_Faq_Questions WHERE active = 'Y' ORDER BY ? LIMIT ?;
#FETCH_FAQ_TOP=SELECT questionId, questionText, answerText, active, creation_date, faqCategory FROM Sib_Faq_Questions WHERE active = 'Y' LIMIT 10;

SIGNUP_COMPLETE_USER=INSERT INTO Sib_Users(userName, password, firstName, lastName, userType, imageUrl, school, accomplishments, familyIncome, yourDream) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);

#SIGNUP_COMPLETE_PROFILE=INSERT INTO saatya.saatya_user_profile(user_id,sch_colle_degree_id,grade,special_accomplishments,potential_college_major,extra_curricular_activity,want_help_in,approximate_family_income,childhood_aspiration) VALUES(?,?,?,?,?,?,?,?,?);

GET_USERID=SELECT userid, userName FROM Sib_Users where userName = ?;

#MTDU
GET_LIST_MENTOR=SELECT userid, CONCAT(firstName,' ',lastName) fullName FROM Sib_Users WHERE userType = 'M' ORDER BY fullName;

SUBJECT_DATA_INSERT=INSERT INTO Sib_Subject(subject,description,creationDate,active,createdBy, lastUpdateDate, lastUpdatedBy) VALUES(?,?,STR_TO_DATE(?,'%m/%d/%Y'),?,?,curdate(),?);

#SUBJECT_DATA_INSERT=INSERT INTO Sib_Subjects(SUBJECT_NAME,DESCRIPTION,CREATION_DATE,ACTIVE,CREATED_BY, LAST_UPDATE_DATE, LAST_UPDATED_BY) VALUES(?,?,STR_TO_DATE(?,?),?,?,SYSDATE(),?);

SUBJECT_DATA_DELETE=DELETE FROM Sib_Subject WHERE subjectId = ?

#VIDEO_SUBJECT_MAPPING_DATA_INSERT=INSERT INTO `Sib_Subject_Categories`(`subject_category_name`,`description`,`subject_id`,`active`)VALUES(?,?,?,?);

VIDEO_SUBJECT_MAPPING_DATA_INSERT=INSERT INTO `Sib_Topic`(`topic`,`description`,`subjectId`,`active`)VALUES(?,?,?,?);

VIDEO_SUBJECT_MAPPING_DATA_READ=SELECT topicId subject_category_id, topic subject_category_name, description, active FROM Sib_Topic WHERE subjectId =? order by topic;

VIDEO_SUBJECT_MAPPING_DATA_READ_PN=SELECT topicId subject_category_id, topic subject_category_name, description, active FROM Sib_Topic WHERE subjectId =? order by topic limit ?,?;

VIDEO_SUBJECT_MAPPING_DATA_READ_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Topic WHERE subjectId =? order by topic;

#VIDEO_SUBJECT_MAPPING_DATA_READ=SELECT subject_category_id, subject_category_name, description, active FROM Sib_Subject_Categories WHERE subject_id =? order by subject_category_name;

#VIDEO_SUBJECT_MAPPING_DATA_UPDATE=UPDATE Sib_Subject_Categories SET subject_category_name = ? , DESCRIPTION = ? , ACTIVE = ?  WHERE subject_category_id = ?

#VIDEO_SUBJECT_MAPPING_DATA_DELETE=DELETE FROM Sib_Subject_Categories WHERE subject_category_id = ?

VIDEO_SUBJECT_MAPPING_DATA_UPDATE=UPDATE Sib_Topic SET topic = ? , DESCRIPTION = ? , ACTIVE = ?  WHERE topicId = ?

VIDEO_SUBJECT_MAPPING_DATA_DELETE=DELETE FROM Sib_Topic WHERE topicId = ?

#VIDEO_SUBCATAGERY_READ=SELECT sssc.subject_sub_category_id,subject_sub_category_name,sssc.description,popular_video, video_link, sssc.image FROM Sib_Subject_Sub_Categories sssc , Sib_Subject_Categories ssc WHERE ssc.subject_category_id = sssc.subject_category_id and ssc.subject_category_id =? AND ssc.subject_id  =? and sssc.active='Y' ORDER BY popular_video desc

#SUBJECT_SUB_CATEGORY_INSERT=INSERT INTO `Sib_Subject_Sub_Categories`(subject_category_id,subject_sub_category_name,description,popular_video,video_link,image,active,creation_date,points) values(?,?,? ,?,?,?,'Y',SYSDATE(),0);

SUBJECT_SUB_CATEGORY_INSERT=INSERT INTO `Sib_Sub_Topic`(topicId,subTopic,description,active,creationDate) values(?,?,? ,'Y',SYSDATE());

#VIDEO_SUBCATAGERY_READ=SELECT sst.subTopicId subject_sub_category_id,sst.subTopic subject_sub_category_name,sst.description,sv.averageRating popular_video, sv.url video_link, sv.image  FROM Sib_Sub_Topic sst , Sib_Topic st ,Sib_Videos sv WHERE sst.topicId = st.topicId and sv.subTopic = sst.subTopic and sv.topic =st.topic and sv.subTopic =sst.subTopic and st.topicId =?  AND st.subjectId  =? and sst.active='Y'  and st.active='Y' ORDER BY averageRating desc

VIDEO_SUBCATAGERY_READ=SELECT vid,title,subTopic,description,image, url,runningtime,videoEnable  FROM Sib_Videos where topicId =?  AND subjectId  =? ORDER BY subTopic desc

SUBJECT_SUB_CATEGORY_UPDATE=UPDATE Sib_Videos SET title=?, subTopic = ?,description = ? ,image = ?,url = ?,videoEnable = ? WHERE vid = ?;

SUBJECT_SUB_CATEGORY_DELETE=DELETE FROM Sib_Videos WHERE vid = ?

STUDENT_UPLOAD=INSERT INTO Sib_Essay_Upload (userId, status, originalDocument, docSubmittedDate, nameOfEssay, descriptionOfEssay, odFilesize, mimeType, urlFile, urlReview)  VALUES  (?, ?, ?, CURRENT_TIMESTAMP, ?, ?, ?, ?, ?, ?);

MENTOR_UPLOAD=UPDATE `Sib_Essay_Upload` SET `status` = ?,`reviewedDocument` = ?,`rdFilesize` = ?,`docReviewedDate` = CURRENT_TIMESTAMP WHERE userId =?;
 
STUDENT_DOWNLOAD=SELECT originalDocument,descriptionOfEssay,odFilesize,mimeType   FROM Sib_Essay_Upload where userId = ? and uploadEssayId = ? ;

MENTOR_DOWNLOAD=SELECT reviewedDocument,descriptionOfEssay,rdFilesize,mimeType   FROM Sib_Essay_Upload where userId = ? and uploadEssayId = ?;

GET_URL_FILE_ESSAY=SELECT urlFile FROM Sib_Essay_Upload WHERE uploadEssayId = ?;

GET_ESAY=SELECT nameOfEssay, descriptionOfEssay, docSubmittedDate, status, uploadEssayId FROM Sib_Essay_Upload WHERE userId=? ORDER BY uploadEssayId DESC limit ?, ?;

GET_ESAY_COUNT=SELECT count(*) as COUNT FROM Sib_Essay_Upload WHERE userId=?;

GET_ESSAY_BY_ID=SELECT nameOfEssay, descriptionOfEssay, docSubmittedDate, status, uploadEssayId, urlFile, urlReview FROM Sib_Essay_Upload WHERE uploadEssayId = ?;

GET_ALL_ESAY=SELECT nameOfEssay, descriptionOfEssay, docSubmittedDate, status, uploadEssayId, userId FROM Sib_Essay_Upload ORDER BY uploadEssayId DESC limit ?, ?;

GET_ALL_ESSAY_STUDENT=SELECT nameOfEssay, descriptionOfEssay, docSubmittedDate, status, uploadEssayId, userId FROM Sib_Essay_Upload WHERE userId = ? ORDER BY uploadEssayId DESC limit ?, ?;

GET_ALL_ESAY_COUNT=SELECT count(*) as COUNT FROM Sib_Essay_Upload;

GET_ALL_ESSAY_STUDENT_COUNT=SELECT count(*) as COUNT FROM Sib_Essay_Upload WHERE userId = ?;

POST_DISCUSSION=INSERT INTO `Sib_Essay_Upload_discussion`(`userId`, `message`) VALUES (?, ?);

#GET_DISCUSSION=SELECT usr.firstName, usr.lastName, usr.imageUrl, usr.userid, dis.message, (SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(dis.creationDate, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(dis.creationDate, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(dis.creationDate, NOW())), ' minutes')) creationDate FROM Sib_Essay_Upload_discussion dis, Sib_Users usr  WHERE dis.userId = usr.userid and dis.userId = ? ORDER BY discussionId DESC limit ?,?;

GET_DISCUSSION=SELECT usr.firstName, usr.lastName, usr.imageUrl, usr.userid, dis.message, UNIX_TIMESTAMP(dis.creationDate) creationDate FROM Sib_Essay_Upload_discussion dis, Sib_Users usr  WHERE dis.userId = usr.userid and dis.userId = ? ORDER BY discussionId DESC limit ?,?;

GET_DISCUSSION_COUNT=SELECT count(*) as COUNT FROM Sib_Essay_Upload_discussion dis, Sib_Users usr  WHERE dis.userId = usr.userid and dis.userId = ?;

REMOVE_ESAY=DELETE FROM `Sib_Essay_Upload` WHERE uploadEssayId = ?;

QUESTION_ID_LIKE=INSERT INTO Sib_Post_Like (`uid`,`pid`,`likePost`) VALUES (?, ?, 1);

SELECT_QUESTION=SELECT * FROM Sib_Post_Like WHERE uid = ? and pid = ? and likePost = ?;

ANSWERID_LIKE=INSERT INTO Sib_Answer_like (`uid`,`aid`,`likeAnswer`) VALUES (?,?,?);

GET_POST_ANSWER_LIST=SELECT * FROM Sib_Forum_Answer order by aid;

GET_POST_ANSWER_SUBID_LIST=SELECT * FROM Sib_Forum_Answer where pid = ? order by pid;

GET_POST_ANSWER_LIST_PN=SELECT * FROM Sib_Forum_Answer order by aid  limit ? offset ?; 

#GET_POST_ANSWER_LIST_SUBID_PN=SELECT SU.userName, SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SFA.aid, SFA.pid, SFA.authorID, SFA.title, SFA.content, SFA.numViews, SFA.numReplies, SFA.image, UNIX_TIMESTAMP(SFA.timeStamp) timeStamp, UNIX_TIMESTAMP(SFA.updateTime) updateTime, SFA.enableFlag, (SELECT COUNT(*) FROM Sib_Answer_like WHERE aid = SFA.aid AND likeAnswer = 'Y') AS countLike FROM Sib_Forum_Answer AS SFA JOIN Sib_Users as SU ON authorID = userid WHERE pid = ? ORDER BY aid DESC limit ?,?;
GET_POST_ANSWER_LIST_SUBID_PN= SELECT SU.userName, SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SFA.aid, SFA.pid, SFA.authorID, SFA.title, SFA.content, SFA.numViews, SFA.image, UNIX_TIMESTAMP(SFA.timeStamp) timeStamp, count(L.uid) countLike FROM Sib_Forum_Answer AS SFA JOIN Sib_Users AS SU ON authorID = userid LEFT JOIN Sib_Answer_like L ON (L.aid = SFA.aid AND L.likeAnswer='Y') WHERE pid = ? GROUP BY  SU.userName,SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SFA.aid, SFA.pid, SFA.authorID, SFA.title, SFA.content, SFA.numViews, SFA.numReplies, SFA.image, UNIX_TIMESTAMP(SFA.timeStamp) ORDER BY aid DESC LIMIT ? OFFSET ?;

GET_POST_ANSWER_LIST_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Forum_Answer where pid = ?;

GET_POST_ANSWER_LASTEST=SELECT * FROM  Sib_Forum_Answer WHERE pid = ? ORDER BY pid DESC limit 1;

UPDATE_VIEW_POST=UPDATE Sib_Forum_Post SET numViews = (numViews +1) WHERE pid = ?;

LIKE_POST_READ=SELECT * FROM Sib_Post_Like WHERE uid = ? and pid = ?;

UPDATE_LIKE_POST=UPDATE Sib_Post_Like SET `likePost` = likePost+1 WHERE pid = ? and uid = ?;

UPDATE_UNLIKE_POST=UPDATE Sib_Post_Like SET `likePost` = 0 WHERE pid = ? and uid = ?;

#ONE_ANSWER_FORUM=SELECT SU.userName, SU.firstName, SU.lastName, SFA.aid, SFA.pid, SFA.authorID, SFA.title, SFA.content, SFA.numViews, SFA.numReplies, SFA.image, (SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(SFA.timeStamp, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(SFA.timeStamp, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(SFA.timeStamp, NOW())), ' minutes')) timeStamp, (SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(SFA.updateTime, NOW())) / 24), ' day(s) ', MOD(HOUR(TIMEDIFF(SFA.updateTime, NOW())), 24), ' hour(s) ',MINUTE(TIMEDIFF(SFA.updateTime, NOW())), ' minutes')) updateTime, SFA.enableFlag, (SELECT COUNT(*) FROM Sib_Answer_like sal, Sib_Forum_Answer sfa WHERE sal.aid = sfa.aid AND likeAnswer = 'Y' AND sal.aid = SFA.aid) as countLike FROM Sib_Forum_Answer as SFA join Sib_Users as SU on SFA.authorID = userid WHERE pid = ? ORDER BY aid DESC limit 1;

ONE_ANSWER_FORUM=SELECT SU.userName, SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SFA.aid, SFA.pid, SFA.authorID, SFA.title, SFA.content, SFA.numViews, SFA.numReplies, SFA.image, UNIX_TIMESTAMP(SFA.timeStamp) timeStamp, UNIX_TIMESTAMP(SFA.updateTime) updateTime, SFA.enableFlag, (SELECT COUNT(*) FROM Sib_Answer_like sal, Sib_Forum_Answer sfa WHERE sal.aid = sfa.aid AND likeAnswer = 'Y' AND sal.aid = SFA.aid) AS countLike FROM Sib_Forum_Answer AS SFA JOIN Sib_Users as SU ON SFA.authorID = userid WHERE pid = ? ORDER BY aid DESC limit 5;

COUNT_ANSWER_POST_INDEX=SELECT COUNT(*) AS count FROM Sib_Forum_Answer WHERE pid = ?; 

LIKE_ANSWER_READ=SELECT * FROM Sib_Answer_like WHERE uid = ? and aid = ?;

ANSWER_ID_LIKE=INSERT INTO Sib_Answer_like (`uid`, `aid`, `likeAnswer`) VALUES (?, ?, 'Y');

SELECT_ANSWER=SELECT * FROM Sib_Answer_like WHERE uid = ? and aid = ? and likeAnswer = 'Y';

UPDATE_LIKE_ANSWER=UPDATE Sib_Answer_like SET `likeAnswer` = (CASE WHEN `likeAnswer` ='Y' THEN 'N' ELSE 'Y' END) WHERE uid = ? and aid = ?;

UPDATE_UNLIKE_ANSWER=UPDATE Sib_Answer_like SET `likeAnswer` = 'N' WHERE uid = ? and aid = ?;

SUBJECT_GET_TAGS=SELECT topicId, topic, subjectId FROM Sib_Topic WHERE subjectId=?;

GET_IDSUBJECT_WITH_IDCATEGORY=SELECT ST.subjectId, SS.subject FROM Sib_Topic as ST join Sib_Subject as SS on ST.subjectId = SS.subjectId WHERE topicId=?;

ACCOMPLISHMENT_READ=SELECT * FROM Sib_Users WHERE userid = ?;

MAJOR_READ=SELECT majorId, majorName FROM Sib_Majors;

ACTIVITY_READ=SELECT activityId, activityName FROM Sib_Activity;

HELP_READ=SELECT topicId, topic, subjectId FROM Sib_Topic;

MAJOR_OF_USER=SELECT SM.majorId, SM.majorName FROM Sib_Users SU join Sib_User_Major SUM ON SU.userid = SUM.userId join Sib_Majors SM on SM.majorId = SUM.majorId WHERE SU.userid=?;

ACTIVITY_OF_USER=SELECT SA.activityId, SA.activityName FROM Sib_Users SU join Sib_User_Activity SUA ON SU.userid = SUA.userId join Sib_Activity SA on SA.activityId = SUA.activityId WHERE SU.userid = ?;

#HELP_OF_USER=SELECT ST.topicId, ST.topic FROM Sib_Users SU join Sib_User_Topic SUT ON SU.userid = SUT.userId join Sib_Topic ST on ST.topicId = SUT.topicId WHERE SU.userid = ?;

HELP_OF_USER=SELECT SS.subjectId, SS.subject FROM Sib_Users SU join Sib_User_Subject SUS ON SU.userid = SUS.userId join Sib_Subject SS on SS.subjectId = SUS.subjectId WHERE SU.userid = ?;

DELETE_USER_MAJOR=DELETE FROM Sib_User_Major WHERE userId = ?;

DELETE_USER_ACTIVITY=DELETE FROM Sib_User_Activity WHERE userId = ?;

DELETE_USER_TOPIC=DELETE FROM Sib_User_Topic WHERE userId = ?;

DELETE_USER_SUBJECT=DELETE FROM Sib_User_Subject WHERE userId = ?;

INSERT_SIB_USER_MAJOR=INSERT INTO Sib_User_Major(userId, majorId) VALUES (?, ?);

INSERT_SIB_USER_ACTIVITY=INSERT INTO Sib_User_Activity(userId, activityId) VALUES (?, ?);

INSERT_SIB_USER_TOPIC=INSERT INTO Sib_User_Topic(userId, topicId) VALUES (?, ?);

INSERT_SIB_USER_SUBJECT=INSERT INTO Sib_User_Subject(userId, subjectId) VALUES (?, ?);

UPDATE_PASSWORD= UPDATE Sib_Users SET password = ? WHERE userName = ?;

UPDATE_USER_CODE=UPDATE Sib_Users SET code = ?, timeForgot = now() WHERE userName = ?;

GET_TOKEN_FORGOT_PASSWORD=SELECT COUNT(code) as count FROM Sib_Users WHERE code = ?;

DELETE_TOKEN_FORGOT_PASSWORD=UPDATE Sib_Users SET code = ? WHERE code = ?;

SELECT_TIME_SEND_TOKEN=SELECT timeForgot FROM Sib_Users WHERE code = ?;

GET_ADDRESS_WEB=SELECT valueof FROM Sib_Config WHERE name = ?;

#GET_ADDRESS_WEB=SELECT valueof FROM Sib_Config WHERE id = 2;

GET_POLICY=SELECT policy FROM Sib_Policy WHERE policyId = 1;

GET_TERMS=SELECT terms FROM Sib_Terms WHERE termsId = 1;

CREATE_NOTIFICATION_QUESTION=INSERT INTO Sib_Notification(userId, authorId, type, title, notification, timestamp, subjectId, questionId, status) VALUES (?, ?, ?, ?, ?, now(), ? ,  ?, 'N');

CREATE_NOTIFICATION_VIDEO= INSERT INTO Sib_Notification(userId, authorId, type, title, notification, timestamp, subjectId, videoId, status) VALUES (?, ?, ?, ?, ?, now(), ?, ?, 'N');

CREATE_NOTIFICATION_VIDEO_ADMISSION=INSERT INTO Sib_Notification(userId, authorId, type, title, notification, timestamp, videoId, status, idSubAdmission, idTopicSubAdmission) VALUES (?, ?, ?, ?, ?, now(), ?, 'N', ?, ?);

CREATE_NOTIFICATION_ARTICLE=INSERT INTO Sib_Notification(userId, authorId, type, title, notification, timestamp, status, articleId) VALUES (?, ?, ?, ?, ?, now(), 'N', ?);

CREATE_NOTIFICATION_ESSAY=INSERT INTO Sib_Notification(userId, authorId, type, title, notification, timestamp, status, idEssay) VALUES (?, ?, ?, ?, ?, now(), 'N', ?);

GET_NOTIFICATION_NOT_READED=SELECT id, SN.userId, authorId, type, title, notification, UNIX_TIMESTAMP(timestamp) timestamp, subjectId, topicId, videoId, questionId, articleId, idSubAdmission, idTopicSubAdmission, idEssay, status, SU.firstName, SU.lastName FROM Sib_Notification SN JOIN Sib_Users SU ON SU.userid = authorId WHERE SN.status = ? AND SN.userId = ? ORDER BY id DESC limit 0, 5;

GET_NOTIFICATION_NOT_READED_COUNT=SELECT COUNT(*) AS COUNT FROM Sib_Notification WHERE status = ? AND userId = ?;

GET_NOTIFICATION_READED=SELECT id, SN.userId, authorId, type, title, notification, UNIX_TIMESTAMP(timestamp) timestamp, subjectId, topicId, videoId, questionId, articleId, idSubAdmission, idTopicSubAdmission, status, SU.firstName, SU.lastName FROM Sib_Notification SN JOIN Sib_Users SU ON SU.userid = authorId WHERE SN.status = 'Y' AND SN.userId = ? ORDER BY id DESC limit 0, 5;

GET_NOTIFICATION_READED_COUNT=SELECT COUNT(*) AS COUNT FROM Sib_Notification WHERE status = 'Y' AND userId = ?;

UPDATE_STATUS_NOTIFICATION=UPDATE Sib_Notification SET status = ? WHERE id = ?;

UPDATE_STATUS_ALL_NOTIFICATION=UPDATE Sib_Notification SET status = 'Y' WHERE userId = ?;

GET_ALL_NOTIFICATION=SELECT id, SN.userId, authorId, type, title, notification, UNIX_TIMESTAMP(timestamp) timestamp, subjectId, topicId, videoId, questionId, articleId, idSubAdmission, idTopicSubAdmission, idEssay, status, SU.firstName, SU.lastName FROM Sib_Notification SN JOIN Sib_Users SU ON SU.userid = authorId WHERE SN.userId = ? ORDER BY status, id DESC limit ?, ?;

GET_ALL_NOTIFICATION_COUNT=SELECT COUNT(*) AS COUNT FROM Sib_Notification WHERE userId = ?;

GET_LIKE_POST_BY_USER=SELECT * FROM Sib_Post_Like WHERE uid = ? AND likePost = 1;

GET_USER_POST_VIDEO=SELECT * FROM Sib_Videos WHERE vid = ?;

GET_INFO_ARTICLE=SELECT * FROM Sib_Article WHERE arId = ?;

GET_INFO_ESSAY=SELECT * FROM Sib_Essay_Upload WHERE uploadEssayId = ?;

GET_INFO_VIDEO_ADMISSION=SELECT vId, authorId, title, description, youtubeUrl, image, creationDate, idTopicSubAdmission, runningTime, numRatings, idSubAdmission FROM Sib_Video_Admission SVA join Sib_Topic_Sub_Admission STSA ON SVA.idTopicSubAdmission = STSA.id  WHERE vId = ?;

GET_VIDEOID_OF_COMMENT=SELECT * FROM Sib_Video_Comments WHERE cid = ?;

GET_VIDEO_ADMISSION_ID_OF_COMMENT=SELECT * FROM Sib_Video_Admission_Comments WHERE cid = ?;

GET_ARTICLEID_OF_COMMENT=SELECT * FROM Sib_Article_Comments WHERE cid = ?;

GET_ESSAYID_OF_COMMENT=SELECT * FROM Sib_Essay_Comments WHERE cid = ?;

GET_VIDEO_WITH_VIDEOID=SELECT * FROM Sib_Videos WHERE vid = ?;

GET_VIDEO_ADMISSION_WITH_VIDEOID=SELECT * FROM Sib_Video_Admission WHERE vId = ?;

GET_ARTICLE_WITH_ARTICLEID=SELECT * FROM Sib_Article WHERE arId = ?;

GET_ESSAY_WITH_ESSAYID=SELECT * FROM Sib_Essay_Upload WHERE uploadEssayId = ?;

GET_AUTHOR_COMMENT=SELECT * FROM Sib_Comments WHERE cid = ?;

GET_POST_WITH_POSTID=SELECT * FROM Sib_Forum_Post WHERE pid = ?;

GET_POSTID_WITH_ANSWER=SELECT * FROM Sib_Forum_Answer WHERE aid = ?;

UPDATE_ACCOMPLISHMENT_MOBILE=UPDATE Sib_Users SET accomplishments = ? WHERE userid = ?;

UPDATE_GRADE_MOBILE=UPDATE Sib_Users SET currentClass = ? WHERE userid = ?;

UPDATE_SCHOOL_MOBILE=UPDATE Sib_Users SET school = ? WHERE userid = ?;

GET_VIDEOS_LIST_BY_USER_PN = SELECT vid, title, author, authorId, v.Subject, topic, subtopic, v.description, v.image, url, runningTime, numViews, numRatings, numComments FROM Sib_Videos v, Sib_Users u WHERE v.authorID = u.userid AND u.userid = ? order by vid DESC limit ?, ?;

GET_VIDEOS_LIST_BY_USER_PN_COUNT = SELECT count(*) as COUNT FROM Sib_Videos v, Sib_Users u where v.authorID = u.userid and u.userid = ?;

UPDATE_VIDEO=UPDATE Sib_Videos SET title = ?, description = ? WHERE vid = ?;

GET_ADMISSION=SELECT * FROM Sib_Admission;

GET_SUB_ADMISSION=SELECT * FROM Sib_Sub_Admission WHERE idAdmission = ?;

GET_TOPIC_FIRST_ADMISSION=SELECT * FROM Sib_Topic_Sub_Admission WHERE idSubAdmission = ? limit 1;

GET_TOPIC_SUB_ADMISSION=SELECT STSA.id, STSA.name, STSA.idSubAdmission, SSA.name as subName, SA.name as nameAdmission FROM Sib_Topic_Sub_Admission STSA join Sib_Sub_Admission SSA ON STSA.idSubAdmission = SSA.id join Sib_Admission SA on SSA.idAdmission = SA.id WHERE idSubAdmission = ?;

GET_VIDEO_ADMISSION_PN=SELECT SVA.vId, SU.userid, SU.userName, SU.firstName, SU.lastName, SVA.youtubeUrl, SVA.title, SVA.description, SVA.image, SVA.creationDate, SVA.numRatings, SVA.runningTime FROM Sib_Video_Admission SVA join Sib_Users SU ON SVA.authorId = SU.userid WHERE idTopicSubAdmission = ? ORDER BY vId DESC;

GET_VIDEO_ADMISSION=SELECT SVA.vId, SU.userid, SU.userName, SU.firstName, SU.lastName, SVA.youtubeUrl, SVA.runningTime, SVA.title, SVA.description, SVA.image, SVA.creationDate, SVA.idTopicSubAdmission, STSA.name topicSubAdmission FROM Sib_Video_Admission SVA join Sib_Users SU ON SVA.authorId = SU.userid join Sib_Topic_Sub_Admission STSA ON STSA.id = SVA.idTopicSubAdmission WHERE idTopicSubAdmission = ? ORDER BY vId DESC;

GET_VIDEO_ADMISSION_COUNT=SELECT count(*) as COUNT FROM Sib_Video_Admission SVA join Sib_Users SU ON SVA.authorId = SU.userid WHERE SVA.authorId = SU.userid and SVA.idTopicSubAdmission = ?;

GET_ARTICLES_PN=SELECT SA.arId, SU.userid, SU.userName, SU.firstName, SU.lastName, SU.imageUrl AS imageUser, SU.idFacebook, SU.idGoogle, SA.title, SA.description, SA.image, UNIX_TIMESTAMP(SA.creationDate) as creationDate, (SELECT COUNT(*) FROM Sib_Article_Comments WHERE arId = SA.arId) as numComment FROM Sib_Article SA join Sib_Users SU ON SA.authorId = SU.userid WHERE idAdmission = ? ORDER BY arId DESC LIMIT ?, ?;

GET_ARTICLES_COUNT=SELECT count(*) as COUNT FROM Sib_Article SA join Sib_Users SU ON SA.authorId = SU.userid WHERE SA.authorId = SU.userid and SA.idAdmission = ?;

ANSWER_ARTICLE=INSERT INTO Sib_Article_Answer(authorId, content, arId) VALUES(?, ?, ?);

GET_ANSWERS_ARTICLE_PN=SELECT SAA.aId, SU.userid, SU.userName, SU.firstName, SU.lastName, SAA.content, SAA.creationDate FROM Sib_Article_Answer SAA join Sib_Users SU ON SAA.authorId = SU.userid WHERE arId = ? ORDER BY aId DESC LIMIT ?, ?;

GET_ANSWERS_ARTICLE_COUNT=SELECT count(*) as COUNT FROM Sib_Article_Answer SAA join Sib_Users SU ON SAA.authorId = SU.userid WHERE SAA.authorId = SU.userid and SAA.arId = ?;

GET_ARTICLE_DETAIL=SELECT SA.arId, SA.authorId, SA.title, SA.description, SA.image, SA.content, UNIX_TIMESTAMP(SA.creationDate) as creationDate, SA.idAdmission, SU.firstName, SU.lastName, SU.imageUrl AS imageUser, SU.userid, SU.idFacebook, SU.idGoogle FROM Sib_Article SA join Sib_Users SU ON SA.authorId = SU.userid WHERE arId = ?;

GET_VIDEO_ADMISSION_WITH_TOPIC=SELECT SVA.vId, SVA.authorId, SVA.title, SVA.description, SVA.youtubeUrl, SVA.image, SVA.creationDate, SVA.idTopicSubAdmission, SVA.numRatings, SVA.runningTime, SVA.numViews, SU.firstName, SU.lastName FROM Sib_Video_Admission SVA join Sib_Users SU ON SVA.authorId = SU.userid WHERE idTopicSubAdmission = ? ORDER BY vId DESC limit 3;

GET_VIDEO_ADMISSION_DETAIL=SELECT SVA.vId, SVA.authorId, SVA.title, SVA.description, SVA.youtubeUrl, SVA.image, UNIX_TIMESTAMP(SVA.creationDate) as creationDate, SVA.idTopicSubAdmission, SVA.numRatings, SVA.runningTime, STSA.id idTopicSubAdmission, STSA.name topicSubName, SSA.id idSubAdmission, SSA.name subName, (SELECT avg(rating) FROM Sib_Video_Admission_Rating WHERE vid = SVA.vId) AS rating FROM Sib_Video_Admission SVA join Sib_Topic_Sub_Admission STSA ON SVA.idTopicSubAdmission = STSA.id join Sib_Sub_Admission SSA on SSA.id = STSA.idSubAdmission WHERE vId = ?;

GET_VIDEO_ADMISSION_VIEW_PN=SELECT SVA.vId, SU.userid, SU.userName, SU.firstName, SU.lastName, SVA.youtubeUrl, SVA.title, SVA.description, SVA.image, SVA.creationDate, SVA.numRatings, SVA.numViews, SVA.runningTime, (SELECT avg(rating) FROM Sib_Video_Admission_Rating WHERE vid = SVA.vId) AS rating FROM Sib_Video_Admission SVA join Sib_Users SU ON SVA.authorId = SU.userid WHERE idTopicSubAdmission = ? ORDER BY chapter, title LIMIT ?, ?;

UPDATE_VIEW_VIDEO_ADMISSION=UPDATE Sib_Video_Admission SET numViews = numViews + 1 WHERE vId = ?;

UPDATE_AVARTAR_USER=UPDATE Sib_Users SET imageUrl = ? WHERE userid = ?;

GET_AVATAR_USER=SELECT imageUrl FROM Sib_Users WHERE userid = ?;

GET_ARTICLE_BY_USER_PN=SELECT SU.firstName, SU.lastName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SA.arId, SA.authorId, SA.title, SA.description, SA.image, SA.numComments, SA.idAdmission, SA.content, UNIX_TIMESTAMP(SA.creationDate) creationDate FROM Sib_Article SA JOIN Sib_Users SU ON SA.authorId = SU.userid WHERE authorId = ? LIMIT ?, ?;

GET_ARTICLE_BY_USER_PN_COUNT=SELECT count(*) as COUNT FROM Sib_Article WHERE authorId = ?;

#GET_ALL_ARTICLE=SELECT * FROM Sib_Article ORDER BY arId DESC;

GET_ALL_ARTICLE=SELECT CONCAT(su.firstName,' ',su.lastName) author, CONCAT(su2.firstName,' ',su2.lastName) createByUser,sa.* FROM Sib_Article sa, Sib_Users su, Sib_Users su2 WHERE sa.authorId = su.userid and sa.createBy = su2.userid ORDER BY arId DESC;

DELETE_ARTICLE=DELETE FROM Sib_Article WHERE arId = ?;

GET_IMAGE_ARTICLE=SELECT image FROM Sib_Article WHERE arId = ?;

GET_IMAGE_UPLOAD_ESSAY=SELECT urlReview FROM Sib_Essay_Upload WHERE uploadEssayId = ?;

UPDATE_ARTICLE=UPDATE Sib_Article SET title = ?, description = ?, image = ?, content = ?, authorId = ?, active = ? WHERE arId = ?;

UPDATE_ARTICLE_NOT_IMAGE=UPDATE Sib_Article SET title = ?, description = ?, content = ?, , authorId = ?, active = ? WHERE arId = ?;

CREATE_ARTICLE=INSERT INTO Sib_Article(authorId, title, description, image, content, active, createBy, createDate) VALUES(?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP());

GET_ALL_TOPIC_SUB_ADMISSION=SELECT * FROM Sib_Topic_Sub_Admission;

DELETE_VIDEO_ADMISSION=DELETE FROM Sib_Video_Admission WHERE vId = ?;

GET_IMAGE_VIDEO_ADMISSION=SELECT image FROM Sib_Video_Admission WHERE vId = ?;

#MTDU
GET_LIST_ALL_VIDEO_ADMISSION=SELECT CONCAT(su.firstName,' ',su.lastName) author, sva.* FROM Sib_Video_Admission sva, Sib_Users su WHERE sva.authorId = su.userid;

UPDATE_VIDEO_ADMISSION=UPDATE Sib_Video_Admission SET title = ?, description = ?, image = ?, youtubeUrl = ?, active = ? WHERE vId = ?;

CREATE_VIDEO_ADMISSION=INSERT INTO Sib_Video_Admission(authorId, title, description, youtubeUrl, image, creationDate, active) VALUES(?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), ?);

GET_ALL_COMMENT=SELECT * FROM Sib_Comments;

DELETE_COMMENT=DELETE FROM Sib_Comments WHERE cid = ?;

#SEARCH_ALL_VIDEO=SELECT vid, authorID, firstName, lastName, title, description, image, url AS youtubeUrl, numRatings, subjectId, topicId, '' AS idTopicSubAdmission, '' AS idSubAdmission FROM Sib_Videos JOIN Sib_Users ON authorID = userid WHERE title LIKE ? OR description LIKE ? OR subject LIKE ? OR topic LIKE ? UNION SELECT vId AS vid, authorId AS authorID, firstName, lastName, title, description, image, youtubeUrl, numRatings, '' AS subjectId, '' AS topicId, idTopicSubAdmission, idSubAdmission FROM Sib_Video_Admission JOIN Sib_Topic_Sub_Admission ON idTopicSubAdmission = id JOIN Sib_Users ON authorId = userid WHERE title LIKE ? OR description LIKE ? limit ?, ?;

#SEARCH_ALL_VIDEO=SELECT sv.vid, authorID, firstName, lastName, title, description, image, url AS youtubeUrl, numRatings, numViews, subjectId, topicId, '' AS idTopicSubAdmission, '' AS idSubAdmission, (SELECT avg(rating) FROM Sib_Video_Rating WHERE vid = sv.vid) as rating FROM Sib_Videos sv JOIN Sib_Users ON authorID = userid WHERE title LIKE ? OR description LIKE ? OR subject LIKE ? OR topic LIKE ? UNION SELECT sva.vId AS vid, authorId AS authorID, firstName, lastName, title, description, image, youtubeUrl, numRatings, numViews, '' AS subjectId, '' AS topicId, idTopicSubAdmission, idSubAdmission, (SELECT avg(rating) FROM Sib_Video_Admission_Rating WHERE vid = sva.vId) as rating FROM Sib_Video_Admission sva JOIN Sib_Topic_Sub_Admission ON idTopicSubAdmission = id JOIN Sib_Users ON authorId = userid WHERE title LIKE ? OR description LIKE ? ORDER BY numViews DESC limit ?, ?;

SEARCH_ALL_VIDEO_BY_USER=SELECT sv.vid, authorID, firstName, lastName, title, description, image, url AS youtubeUrl, numRatings, numViews, subjectId, topicId, '' AS idTopicSubAdmission, '' AS idSubAdmission, (SELECT avg(rating) FROM Sib_Video_Rating WHERE vid = sv.vid) as rating FROM Sib_Videos sv JOIN Sib_Users ON authorID = userid WHERE authorID = ? UNION SELECT sva.vId AS vid, authorId AS authorID, firstName, lastName, title, description, image, youtubeUrl, numRatings, numViews, '' AS subjectId, '' AS topicId, idTopicSubAdmission, idSubAdmission, (SELECT avg(rating) FROM Sib_Video_Admission_Rating WHERE vid = sva.vId) as rating FROM Sib_Video_Admission sva JOIN Sib_Topic_Sub_Admission ON idTopicSubAdmission = id JOIN Sib_Users ON authorId = userid WHERE authorId = ? ORDER BY numViews DESC limit ?, ?;

COUNT_SEARCH_ALL_VIDEO_BY_USER=SELECT COUNT(*) AS count FROM (SELECT vid, authorID, title, description, image, url AS youtubeUrl, numRatings, subjectId, topicId, '' AS idTopicSubAdmission FROM Sib_Videos WHERE authorID = ? UNION SELECT vId AS vid, authorId AS authorID, title, description, image, youtubeUrl, numRatings, '' AS subjectId, '' AS topicId, idTopicSubAdmission FROM Sib_Video_Admission WHERE authorId = ?) q;

SEARCH_ALL_VIDEO=SELECT sv.vid, authorID, firstName, lastName, title, description, image, url AS youtubeUrl, numRatings, numViews, subjectId, topicId, '' AS idTopicSubAdmission, '' AS idSubAdmission, (SELECT avg(rating) FROM Sib_Video_Rating WHERE vid = sv.vid) as rating FROM Sib_Videos sv JOIN Sib_Users ON authorID = userid WHERE title LIKE ? OR description LIKE ? OR subject LIKE ? OR topic LIKE ? UNION SELECT sva.vId AS vid, authorId AS authorID, firstName, lastName, title, description, image, youtubeUrl, numRatings, numViews, '' AS subjectId, '' AS topicId, idTopicSubAdmission, idSubAdmission, (SELECT avg(rating) FROM Sib_Video_Admission_Rating WHERE vid = sva.vId) as rating FROM Sib_Video_Admission sva JOIN Sib_Topic_Sub_Admission ON idTopicSubAdmission = id JOIN Sib_Users ON authorId = userid WHERE title LIKE ? OR description LIKE ? ORDER BY numViews DESC limit ?, ?;

COUNT_SEARCH_ALL_VIDEO=SELECT COUNT(*) AS count FROM (SELECT vid, authorID, title, description, image, url AS youtubeUrl, numRatings, subjectId, topicId, '' AS idTopicSubAdmission FROM Sib_Videos WHERE title LIKE ? OR description LIKE ? OR subject LIKE ? OR topic LIKE ? UNION SELECT vId AS vid, authorId AS authorID, title, description, image, youtubeUrl, numRatings, '' AS subjectId, '' AS topicId, idTopicSubAdmission FROM Sib_Video_Admission WHERE title LIKE ? OR description LIKE ?) q;

CREATE_ABOUT_MENTOR=INSERT INTO Sib_About_Mentor(image, description, introduce) VALUES(?, ?, ?);

GET_ALL_ABOUT_MENTOR=SELECT * FROM Sib_About_Mentor;

GET_IMAGE_ABOUT_MENTOR=SELECT image FROM Sib_About_Mentor WHERE id = ?;

DELETE_ABOUT_MENTOR=DELETE FROM Sib_About_Mentor WHERE id = ?;

UPDATE_ABOUT_MENTOR=UPDATE Sib_About_Mentor SET image = ?, description = ?, introduce = ? WHERE id = ?;

UPDATE_ABOUT_MENTOR_NOT_IMAGE=UPDATE Sib_About_Mentor SET description = ?, introduce = ? WHERE id = ?;

UPDATE_ANSWER=UPDATE Sib_Forum_Answer SET content = ? WHERE aid = ?;

UPDATE_NUMVIEW_VIDEO=UPDATE Sib_Videos SET numViews = numViews + 1 WHERE vid = ?;

CHECK_USER_WATCHED_VIDEO=SELECT * FROM Sib_User_Watch_Video WHERE uid = ? AND vid = ?;

UPDATE_USER_WATCHED_VIDEO=INSERT INTO Sib_User_Watch_Video(uid, vid) VALUES(?, ?);

GET_ID_VIDEO_USER_WATCHED=SELECT * FROM Sib_User_Watch_Video WHERE uid = ?;

CHECK_USER_WATCHED_VIDEO_ADMISSION=SELECT * FROM Sib_User_Watch_Video_Admission WHERE uid = ? AND vid = ?;

UPDATE_USER_WATCHED_VIDEO_ADMISSION=INSERT INTO Sib_User_Watch_Video_Admission(uid, vid) VALUES(?, ?);

GET_ID_VIDEO_ADMISSION_USER_WATCHED=SELECT * FROM Sib_User_Watch_Video_Admission WHERE uid = ?;

SIB_GET_LIST_VIDEO_TUTTORIAL_ADMISSION = SELECT sva.*, su.firstName, su.lastName FROM Sib_Video_Admission sva, Sib_Users su WHERE sva.authorId = su.userid AND idAdmission = ?;
SIB_GET_LIST_ARTICLE_ADMISSION = SELECT sa.arId, sa.authorId, sa.title, sa.description,sa.content, sa.image, sa.numComments, sa.createDate, su.firstName, su.lastName, su.imageUrl FROM Sib_Article sa, Sib_Users su WHERE sa.authorId = su.userid AND idAdmission = ?;
CHECK_USER_FORGOT_PASSWORD=SELECT 1 from Sib_Users where `password` is not null and (username = ? or email = ?)