CREATE_QUESTION=INSERT INTO `Sib_Forum_Post` (`authorID`, `subjectId`, `content`,`imagePath`, `timeStamp`, `updateTime`) VALUES ( ?,?,?, ?, now(), now());
ADD_IMAGE_QUESTION = INSERT INTO `Sib_Post_Ask_Image`(`qid`,`image`) VALUES(?,?);
GET_ALL_CATEGORY_TOPIC = SELECT subjectId,`subject`,image,`level`,parentId, isForum from Sib_Category ORDER BY displaySort ASC
GET_ALL_QUESTION = SELECT  pid,content,UNIX_TIMESTAMP(`timeStamp`) timeStamp,subjectId,topicId FROM Sib_Forum_Post ORDER BY `timeStamp` DESC LIMIT 300;
GET_ALL_QUESTION_MENTOR_BY_SUBJ = SELECT X.* FROM (SELECT SFP.pid,UNIX_TIMESTAMP(SFP. timestamp) timestamp,  SFP.authorID, SU.firstName, SU.lastName,SU.userName, SFP.content, UNIX_TIMESTAMP(SFP.`timeStamp`) AS datetime, ( SELECT UNIX_TIMESTAMP(`timeStamp`) FROM Sib_Forum_Answer WHERE pid = SFP.pid ORDER BY aid DESC LIMIT 1 ) timeanswer,SFP.numReplies, SS.`subject`, SS.subjectId, SU.imageUrl, SFP.numViews FROM Sib_Forum_Post SFP INNER JOIN Sib_Users SU ON SFP.authorID = SU.userid INNER JOIN Sib_Category SS ON SFP.subjectId = SS.subjectId ) X WHERE 1 = 1
GET_STUDENT_SUBCRIBE = SELECT U.userid, U.firstName, U.lastName,U.userName, U.imageUrl FROM Sib_Users U INNER JOIN Sib_Student_Subcribe S ON U.userid = S.StudentId AND U.userType = 'S' where S.MentorId = ? AND S.Subcribe = 'Y' 
GET_TOTAL_LIKE_VIEW_VIDEO = SELECT U.userid, sum(V.numViews) totalview, sum(V.numLike) totallike FROM Sib_Users U LEFT JOIN Sib_Videos V ON U.userid = V.authorid WHERE U.userType = 'M' AND U.userid = ? GROUP BY U.userid
GET_TOTAL_ANSWERS=SELECT U.userid, Count(*) totalanwer from Sib_Users U INNER JOIN Sib_Forum_Answer A on U.userid = A.authorID WHERE U.userid = ? AND U.userType= "M" GROUP BY U.userid
GET_TOP_MENTORS_BY_LIKE_RATE_SUBS=SELECT X.* FROM(SELECT U.userid, U.lastName, U.firstName, U.userName loginName, U.school, SCD.name as schoolName, U.imageUrl, U.isOnline, (SELECT count(authorID) FROM Sib_Answer_like L INNER JOIN Sib_Forum_Answer A ON L.aid = A.aid AND likeAnswer='Y' WHERE A.authorID = U.userid ) numlike, ( SELECT count(*) FROM Sib_Student_Subcribe Where U.userid = MentorId AND Subcribe = 'Y' ) numsub ,COUNT(V.vid) as numvideos ,U.defaultSubjectId, U.accomplishments, U.bio, (SELECT Count(*) from Sib_Forum_Answer WHERE authorID = U.userid ) numAnswers,AVG(V.averageRating) avgrate, SUM(V.numRatings) numRatings 
GET_VIDEOS_BY_PLAYLIST=SELECT L.plid, L.`Name` AS playlistname, V.vid,U.firstName,U.lastName,U.userName,U.imageUrl,V.title, V.url, V.description, V.averageRating, V.numRatings, V.numViews, 	V.runningTime, V.subjectId as subjectVid, (select count(*) from  Sib_Video_Comments where vid = V.vid) as numComments, UNIX_TIMESTAMP(V.timeStamp) as timeStamp,L.subjectId,U.userid ,V.image, c.subject FROM Sib_PlayList L INNER JOIN Sib_PlayList_Videos PV ON PV.plid = L.plid INNER JOIN Sib_Videos V ON PV.vid = V.vid INNER JOIN Sib_Users U ON U.userid = L.CreateBy INNER JOIN Sib_Category c ON V.subjectId = c.subjectId WHERE L.plid = ? order by V.vid DESC
CHECK_SUBSCRIBE=SELECT count(*) isSubs FROM Sib_Student_Subcribe where Subcribe='Y' AND MentorId= ?  AND StudentId=?
GET_STUDENT_POSTED = SELECT  P.PID,  U.FIRSTNAME, U.LASTNAME, U.userName,  P.AUTHORID,  P.TITLE,  P.SUBJECTID,  C. SUBJECT,  P.CONTENT,  P.NUMVIEWS,  P.NUMREPLIES,  UNIX_TIMESTAMP(P. TIMESTAMP) TIMESTAMP,  P.IMAGEPATH FROM  Sib_Forum_Post P INNER JOIN Sib_Category C ON P.subjectId = C.subjectId INNER JOIN Sib_Users U ON U.userid = P.authorID WHERE 1 = 1
GET_STUDENT_POSTED_COUNT = SELECT  COUNT(*) numquestion from Sib_Forum_Post P INNER JOIN Sib_Category C ON P.subjectId = C.subjectId WHERE 1 = 1
SUBSCRIBE_UNSUBSCRIBE_MENTOR= UPDATE Sib_Student_Subcribe set Subcribe = (CASE WHEN Subcribe ='Y' THEN 'N' ELSE 'Y' END) WHERE StudentId  = ? AND MentorId = ?
GET_POST_BY_ID=SELECT SFP.imagePath,SU.userName, SU.firstName, SU.lastName, SU.userName, SU.imageUrl, SU.idFacebook, SU.idGoogle, SFP.pid, SFP.authorID, SFP.title, SFP.subjectId, C.`subject`, SFP.content, SFP.numViews, SFP.numReplies, UNIX_TIMESTAMP(SFP. TIMESTAMP) TIMESTAMP, UNIX_TIMESTAMP(SFP.updateTime) updateTime, SFP.enableFlag FROM Sib_Forum_Post AS SFP JOIN Sib_Users AS SU ON authorID = userid INNER JOIN Sib_Category C on SFP.subjectId = C.subjectId WHERE SFP.pid = ?;
GET_ANSWER_BY_QID = SELECT X.* FROM ( SELECT A.authorID, A.content,A.imagePath imageAnswer, A.pid,U.firstName, U.lastName, U.userName, (SELECT count(*) FROM Sib_Answer_like WHERE aid = A.aid AND `likeAnswer` ='Y') numlike,(SELECT count(*) FROM Sib_Answer_like WHERE aid = A.aid AND uid = ? AND `likeAnswer` ='Y') `like`, U.imageUrl, A.aid, UNIX_TIMESTAMP(A. TIMESTAMP) TIMESTAMP, UNIX_TIMESTAMP(A.updateTime) updateTime FROM Sib_Forum_Answer AS A JOIN Sib_Users AS U ON A.authorID = U.userid WHERE A.pid = ? ) X
POST_EDIT=UPDATE Sib_Forum_Post set imagePath = ?,content=? ,subjectId = ?,`timeStamp` = current_timestamp, updateTime = current_timestamp where pid= ?
GET_VIDEODETAIL_BY_ID = SELECT A.vid, A.title, A.url, A.description, A.image, A.averageRating, U.firstName, U.lastName, U.userName,UNIX_TIMESTAMP(A.`timeStamp`) timeStamp, A.subjectId, C.`subject`,A.numViews, A.numFavourite, A.numRatings, U.imageUrl avatar,( SELECT count(*) FROM Sib_Student_Subcribe Where U.userid = MentorId AND Subcribe='Y' ) numsub, (SELECT count(*) FROM Sib_Videos WHERE authorID = U.userid AND videoEnable = 'Y') totalVideo, (SELECT count(*) FROM Sib_Video_Comments WHERE vid = A.vid) numComments, U.userid  FROM Sib_Videos A INNER JOIN Sib_Users U on A.authorID = U.userid INNER JOIN Sib_Category C on A.subjectId = C.subjectId where A.vid = ?;
GET_COMMENT_VIDEO_BY_VID = SELECT D.cid, D.content, U.userType, U.firstName,U.lastName,U.imageUrl,U.userid, U.userName ,UNIX_TIMESTAMP(D.`timestamp`) `timestamp` from Sib_Video_Comments C INNER JOIN Sib_Comments D ON C.cid = D.cid INNER JOIN Sib_Users U ON D.authorId = U.userid where C.vid = ? ORDER BY D.`timestamp` DESC
CHECK_USER_HISTORY_VIDEO=SELECT * FROM Sib_Video_History WHERE uid = ? AND vid = ?
INSERT_HISTORY_VIDEO=INSERT INTO Sib_Video_History(uid,vid,viewtime) VALUES(?,?,now())
GET_VIDEO_BY_SUBJECTID = SELECT A.vid, A.title, A.url, A.description, A.image, A.averageRating,U.userid, U.firstName, U.lastName, U.userName, UNIX_TIMESTAMP(A.`timeStamp`) timeStamp, A.subjectId, C.`subject`,A.numViews, A.runningTime FROM Sib_Videos A INNER JOIN Sib_Users U on A.authorID = U.userid INNER JOIN Sib_Category C on A.subjectId = C.subjectId where A.subjectId = ?
UPDATE_AVG_RATE = UPDATE Sib_Videos set averageRating = (((IFNULL(numRatings,0)*IFNULL(averageRating,0)) + ?)/(IFNULL(numRatings,0) + 1)) , numRatings = (IFNULL(numRatings,0) + 1) WHERE vid = ?
UPDATE_AVG_RATE_AGAIN = UPDATE Sib_Videos set averageRating = (((IFNULL(numRatings,0)*IFNULL(averageRating,0)) + ?)/(IFNULL(numRatings,0))) WHERE vid = ?
UPDATE_NUMREPLIES_QUESTION = UPDATE Sib_Forum_Post set numreplies = (ifnull(numreplies,0) + 1),updateTime = current_timestamp where pid = ?
CREATE_ANSWER=INSERT INTO Sib_Forum_Answer(pid, authorID, content,imagePath, timeStamp, updateTime, enableFlag) VALUES (?, ?, ?,?, now(), now(), 'Y');
CHECK_VIDEO_FAVOURITE = SELECT vid num from Sib_Video_Favourite where vid =? and uid = ?
SIB_GET_USER_RATE_VIDEO=SELECT * FROM Sib_Video_Rating WHERE uid = ? AND vid = ?
GET_VIDEO_ADMISSION_DETAIL_BY_ID = SELECT A.vId vid, A.idAdmission,A.title, A.youtubeUrl url, A.description,A.averageRating , A.image, A.numRatings, A.numComments, U.firstName, U.lastName, U.userName,UNIX_TIMESTAMP(A.`creationDate`) `creationDate`, A.numViews, U.imageUrl avatar, U.userid FROM Sib_Video_Admission A INNER JOIN Sib_Users U ON A.authorID = U.userid WHERE A.vId = ?
GET_COMMENT_VIDEO_ADMISSION_BY_VID = SELECT D.content, U.firstName,U.lastName,U.userName, U.imageUrl,U.userid ,UNIX_TIMESTAMP(D.`timestamp`) `timestamp` from Sib_Video_Admission_Comments C INNER JOIN Sib_Comments D ON C.cId = D.cid INNER JOIN Sib_Users U ON D.authorId = U.userid where C.vId = ? ORDER BY D.`timestamp` DESC
UPDATE_AVG_RATE_VIDEO_ADMISSION = UPDATE Sib_Video_Admission SET averageRating = ((IFNULL(averageRating, 0) * IFNULL(numRatings, 0)) + ?) / (IFNULL(numRatings, 0) + 1), numRatings = (IFNULL(numRatings,0) + 1) WHERE	vid = ?
UPDATE_AVG_RATE_VIDEO_ADMISSION_AGAIN = UPDATE Sib_Video_Admission SET averageRating = (((IFNULL(averageRating, 0) * IFNULL(numRatings, 0)) + ?) / IFNULL(numRatings, 0)) WHERE vid = ?
GET_VIDEO_ADMISSION_BY_ADMISSION_ID = SELECT A.vId vid, A.idAdmission,A.title, A.youtubeUrl url, A.description, A.image, A.numRatings, U.firstName, U.lastName, U.userName,UNIX_TIMESTAMP(A.`creationDate`) `TIMESTAMP`, A.numViews, U.imageUrl avatar, U.userid, A.runningTime FROM Sib_Video_Admission A INNER JOIN Sib_Users U ON A.authorID = U.userid WHERE A.idAdmission = ?
SIB_NUM_REPLIES_UPDATE_DELETE=UPDATE `Sib_Forum_Post` SET `numReplies` = (IFNULL(numReplies,0) - 1) WHERE  pid = (select pid from Sib_Forum_Answer where aid = ?);
STUDENT_UPLOAD_ESSAY=INSERT INTO Sib_Essay_Upload (userId, originalDocument, docSubmittedDate, descriptionOfEssay, mimeType,urlFile,nameOfEssay,odFilesize,schoolId,majorId)  VALUES  (?, ?, CURRENT_TIMESTAMP,?, ?, ?,?,?,?,?);
GET_COL_UNIVERSITIES=SELECT sch_colle_degree_id id , `name`, type, address1, address2, city, state, zip, UNIX_TIMESTAMP(creation_date) creation_date FROM Sib_School_College_Degree;
GET_ALL_ESSAY_STUDENT=SELECT E.numRate, E.averageRating, UNIX_TIMESTAMP(E.docSubmittedDate) docSubmittedDate, E.nameOfEssay, E.descriptionOfEssay, E.STATUS, E.uploadEssayId, E.userId,U.firstName, U.lastName,U.imageUrl avatar,U.userName,UNIX_TIMESTAMP(E.docReviewedDate) docReviewedDate,U.userid mentorID FROM Sib_Essay_Upload E LEFT JOIN Sib_Users U ON E.mentorId = U.userid WHERE E.userId = ? ORDER BY E.uploadEssayId DESC
GET_MENTOR_ESSAY = SELECT U.userid, U.userName, U.firstName, U.lastName, U.accomplishments, U.school, U.defaultSubjectId, ( SELECT COUNT(*) FROM Sib_Forum_Answer WHERE userid = U.userid ) numAnswer, U.imageUrl, ( SELECT count(authorID) FROM Sib_Answer_like L INNER JOIN Sib_Forum_Answer A ON L.aid = A.aid AND likeAnswer = 'Y' WHERE A.authorID = U.userid ) numlike, ( SELECT count(*) FROM Sib_Student_Subcribe WHERE U.userid = MentorId ) numsub, ( SELECT count(*) FROM Sib_Videos WHERE U.userid = userid ) numvideos, ( SELECT AVG(averageRating) FROM Sib_Videos WHERE U.userid = userid ) avgrate FROM Sib_Users U WHERE U.userid = ?
STUDENT_UPDATE_ESSAY=UPDATE Sib_Essay_Upload SET originalDocument = ?, descriptionOfEssay= ?, mimeType = ?,urlFile =?,nameOfEssay= ?,odFilesize=?,schoolId=?,majorId= ? WHERE `uploadEssayId` = ?
STUDENT_UPDATE_ESSAY_NOFILE=UPDATE Sib_Essay_Upload SET  descriptionOfEssay= ?, nameOfEssay= ?,schoolId=?,majorId= ? WHERE `uploadEssayId` = ?
#Rate article
SIB_GET_USER_RATE_ARTICAL_ADMISSION=SELECT * FROM Sib_Article_Rating WHERE uId = ? AND arId = ?
SIB_RATE_ARTICAL_ADMISSION=INSERT INTO Sib_Article_Rating (arId, uId, rating) VALUE(?, ?, ?);
UPDATE_AVG_RATE_ARTICAL_ADMISSION = UPDATE Sib_Article SET averageRating = ((IFNULL(averageRating, 0) * IFNULL(numRate, 0)) + ?) / (IFNULL(numRate, 0) + 1), numRate = (IFNULL(numRate,0) + 1) WHERE arId = ?
UPDATE_AVG_RATE_ARTICAL_ADMISSION_AGAIN = UPDATE Sib_Article SET averageRating = (((IFNULL(averageRating, 0) * IFNULL(numRate, 0)) + ?) / IFNULL(numRate, 0)) WHERE arId = ?
SIB_RATE_UPDATE_ARTICAL_ADMISSION=UPDATE Sib_Article_Rating set rating = ? where arId = ? and uId = ?;
#RateEssay
SIB_GET_USER_RATE_ESSAY=SELECT * FROM Sib_Essay_Rating WHERE uid = ? AND eid = ?
SIB_RATE_ESSAY=INSERT INTO Sib_Essay_Rating (eid, uid, rating) VALUE(?, ?, ?);
UPDATE_AVG_RATE_ESSAY = UPDATE Sib_Essay_Upload SET averageRating = ((IFNULL(averageRating, 0) * IFNULL(numRate, 0)) + ?) / (IFNULL(numRate, 0) + 1), numRate = (IFNULL(numRate,0) + 1) WHERE uploadEssayId = ?
UPDATE_AVG_RATE_ESSAY_AGAIN = UPDATE Sib_Essay_Upload SET averageRating = (((IFNULL(averageRating, 0) * IFNULL(numRate, 0)) + ?) / IFNULL(numRate, 0)) WHERE uploadEssayId = ?
SIB_RATE_UPDATE_ESSAY=UPDATE Sib_Essay_Rating set rating = ? where eid = ? and uid = ?;